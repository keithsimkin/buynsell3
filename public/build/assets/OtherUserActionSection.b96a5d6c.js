import{i as L,o as p,c as f,b as u,w as I,q as h,t as C,g as v,F as E,z as a,O as P,r as U}from"./app.72d9fe45.js";import V from"./PsLabel.dd7b9156.js";import D from"./PsButton.81d0ce1f.js";import H from"./PsLoadingDialog.52bc8b7d.js";import M from"./PsConfirmDialog.fdc5ff76.js";import{u as R,U as A}from"./UserStore.e188dd03.js";import{P as z}from"./PsValueStore.46e374fe.js";import{u as G}from"./AppInfoStore.3eac0301.js";import{U as q}from"./UserFollowHolder.8b598f9e.js";import{U as T}from"./UserBlockParameterHolder.5aa06675.js";import{P as O}from"./ps_constants.ea9d0b33.js";import{P as j}from"./PsUtils.eb7a8002.js";import{b as B}from"./PsApiService.74841eb2.js";import{_ as J}from"./plugin-vue_export-helper.21dcd24c.js";import"./PsModal.49a87bcd.js";import"./vue-neat-modal.d239f4e3.js";import"./PsLine.c7f2ab42.js";import"./PsLabelTitle.8e337e9e.js";import"./User.0c3ba1a8.js";import"./PsObject.a17ef38f.js";import"./RatingDetail.291ad5d1.js";import"./ProductRelation.0b376978.js";import"./DefaultPhoto.cc755f93.js";import"./PsSepetetedStore.9a31ac47.js";import"./UserListParameterHolder.d110b747.js";import"./ApiStatus.5720ba0b.js";const K={name:"OtherUserProfileInfoCard",components:{PsLabel:V,PsButton:D,PsLoadingDialog:H,PsConfirmDialog:M},props:{userId:String},setup(n){const o=L(),b=L(),e=z().getLoginUserId(),s=R("other"),g=G(),i=new A().getOtherUserData(),d=new q,_=new T;i.loginUserId=e,i.id=n.userId,s.loadOtherUser(e,i);async function S(){var t,l,c,m;e&&e!=O.NO_LOGIN_USER?(o.value.openModal(),((t=s.user.data)==null?void 0:t.isFollowed)=="1"?o.value.message=a("other_profile__removing_user_from_follower_list"):o.value.message=a("other_profile__adding_user_to_follower_list"),d.userId=e,d.followedUserId=(m=(c=(l=s.user)==null?void 0:l.data)==null?void 0:c.userId)!=null?m:"",await s.postUserFollow(d),await s.loadOtherUser(e,i),o.value.closeModal()):P.get(route("login"))}function k(t){e&&e!=O.NO_LOGIN_USER?b.value.openModal(a("other_profile__confirm"),a("other_profile__confirm_to_block_user"),a("other_profile__block"),a("other_profile__cancel"),()=>{w(t)},()=>{j.log("Cancel")}):P.get(route("login"))}async function w(t){_.loginUserId=e,_.addedUserId=t,o.value.openModal(),o.value.message=a("other_profile__adding_user_to_block_list");const l=await s.blockUser(_,e);o.value.closeModal(),l.status!=B.ERROR&&l.status==B.SUCCESS&&P.get(route("dashboard"))}return{userStore:s,appInfoStore:g,LoginUserId:e,PsConst:O,psloading:o,ps_confirm_dialog:b,followClick:S,blockClicked:k}}},Q={key:0},W={key:1},X={key:1,class:"mt-5 py-2 px-4 text-center w-full border bg-feAchromatic-50 border-1 border-feSecondary-300 dark:border-feSecondary-500 dark:bg-feSecondary-800 rounded lg:w-full mx-auto"};function Y(n,o,b,r,e,s){var S,k,w,t,l,c,m;const g=U("ps-button"),i=U("ps-label"),d=U("ps-loading-dialog"),_=U("ps-confirm-dialog");return p(),f(E,null,[((S=r.userStore.user.data)==null?void 0:S.userId)!=r.LoginUserId?(p(),f("div",{key:0,class:"text-center mt-6",onClick:o[0]||(o[0]=(...x)=>r.followClick&&r.followClick(...x))},[((k=r.userStore.user.data)==null?void 0:k.isFollowed)=="0"?(p(),f("div",Q,[u(g,{rounded:"rounded",textSize:"text-sm",class:"w-full mx-auto"},{default:I(()=>[h(C(n.$t("other_profile__follow")),1)]),_:1})])):((w=r.userStore.user.data)==null?void 0:w.isFollowed)=="1"?(p(),f("div",W,[u(g,{rounded:"rounded",textSize:"text-sm",class:"w-full mx-auto"},{default:I(()=>[h(C(n.$t("other_profile__unfollow")),1)]),_:1})])):v("",!0)])):v("",!0),((m=(c=(l=(t=r.appInfoStore)==null?void 0:t.appInfo)==null?void 0:l.data)==null?void 0:c.psAppSetting)==null?void 0:m.isBlockUser)==r.PsConst.ONE?(p(),f("div",X,[u(i,{class:"text-sm cursor-pointer",onClick:o[1]||(o[1]=x=>{var y,N,F;return r.blockClicked((F=(N=(y=r.userStore.user)==null?void 0:y.data)==null?void 0:N.userId)!=null?F:"")})},{default:I(()=>[h(C(n.$t("other_profile__block_user")),1)]),_:1})])):v("",!0),u(d,{ref:"psloading",isClickOut:!1},null,512),u(_,{ref:"ps_confirm_dialog"},null,512)],64)}var vo=J(K,[["render",Y]]);export{vo as default};
