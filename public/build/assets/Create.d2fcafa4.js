import{aJ as H,bC as M,d as U,Z as A,i as y,E as O,z,o as p,c,b as n,w as s,a as l,q as i,t as a,h as V,F,s as W,n as N,f as P,g as h,r as d}from"./app.72d9fe45.js";import{P as R}from"./PsLayout.847d3bb7.js";import{u as j}from"./Validators.f69d3a03.js";import{P as q}from"./PsInput.afea411a.js";import{P as G}from"./PsLabel.9b145d71.js";import{P as J}from"./PsButton.75e226c0.js";import{a as Z,d as Q}from"./PsDangerDialog.4a7cc4cb.js";import{P as X}from"./PsCard.bbe9c0c8.js";import{P as Y}from"./PsIcon.8d64a589.js";import{P as x}from"./PsTextarea.b6da5576.js";import{P as ee}from"./PsLoading.1f14f5af.js";import{P as oe}from"./PsCheckboxValue.4ec39ca8.js";import{a as te,P as re}from"./PsActionModal.f08d8887.js";import{P as ne}from"./PsDropdown.dd6513b3.js";import{P as se}from"./PsDropdownSelect.2cfdee10.js";import{P as ae}from"./PsBreadcrumb2.c233a04a.js";import{P as le}from"./PsLabelCaption.0e118b2b.js";import{_ as ie}from"./plugin-vue_export-helper.21dcd24c.js";import"./PsToggle.8b891384.js";import"./toggle.11911129.js";import"./PsWarningDialog.632500d7.js";import"./PsModal.9ecdc9db.js";import"./vue-neat-modal.d239f4e3.js";import"./index.esm.159b9749.js";import"./auth.esm.925cebae.js";import"./SidebarMenuItem.9469c8c6.js";import"./SidebarSubTab.7743e9bd.js";import"./PsErrorDialog.5174f1d4.js";import"./PsInputWithRightIcon.e27f7629.js";import"./PsSuccessDialog.4b6e8f79.js";import"./PsBannerIcon.ba5a991b.js";import"./PsIcon1.56bc2bff.js";import"./Icons.c01eddd9.js";import"./PsLoadingCircleDialog.70b57269.js";import"./PsLabelHeader4.cfe9ad61.js";import"./PsDraggable.2c92160e.js";const de=H(()=>M(()=>import("./GoogleMapPinPicker.8b0d12e9.js"),["assets/GoogleMapPinPicker.8b0d12e9.js","assets/index.448b1588.js","assets/app.72d9fe45.js","assets/app.1665158f.css","assets/plugin-vue_export-helper.21dcd24c.js"])),pe=H(()=>M(()=>import("./OpenStreetMapPinPicker.99c23398.js"),["assets/OpenStreetMapPinPicker.99c23398.js","assets/OpenStreetMapPinPicker.d9c69d29.css","assets/Control.Geocoder.310b1125.js","assets/Control.Geocoder.80a0276c.css","assets/app.72d9fe45.js","assets/app.1665158f.css","assets/plugin-vue_export-helper.21dcd24c.js"])),ue=U({name:"Create",components:{Head:A,GoogleMapPinPicker:de,OpenStreetMapPinPicker:pe,PsInput:q,PsLabel:G,PsButton:J,PsLabelHeader6:Z,PsCard:X,PsTextarea:x,PsIcon:Y,PsLoading:ee,PsCheckboxValue:oe,PsActionModal:te,PsImageIconModal:re,PsDangerDialog:Q,PsDropdown:ne,PsDropdownSelect:se,PsBreadcrumb2:ae,PsLabelCaption:le},layout:R,props:["errors","cities","backendSettings"],setup(e){const t=y(!1),k=y(!1),C=y(),w=y(),b=y(""),m=y(""),{isEmpty:v,minLength:$,isLatitude:u,isLongitude:L}=j(),B=(r,o)=>{e.errors[r]=o?$(r,o,3,null,"TownShip"):v(r,o,null,"TownShip"),r=="name"&&(C.value.isError=!!Boolean(e.errors.name))},f=(r,o)=>{e.errors[r]=o?"":v(r,o),r=="location_city_id"&&(w.value.isError=!!Boolean(e.errors.location_city_id))},g=(r,o)=>{e.errors[r]=o?u(r,o):v(r,o,"","Latitude"),r=="lat"&&(b.value.isError=!!Boolean(e.errors.lat))},E=(r,o)=>{e.errors[r]=o?L(r,o):v(r,o,"","Longitude"),r=="lng"&&(m.value.isError=!!Boolean(e.errors.lng))},I=r=>{let o=r.keyCode?r.keyCode:r.which;(o<48||o>57)&&r.preventDefault()},S=r=>{let o=r.keyCode?r.keyCode:r.which;(o<48||o>57)&&o!==46&&o!==45&&r.preventDefault()};let _=O({name:"",location_city_id:"",lat:"",lng:"",ordering:"",description:"",cover:"",icon:"",video:""});function D(){this.$inertia.post(route("township.store"),_,{forceFormData:!0,onBefore:()=>{t.value=!0},onSuccess:()=>{t.value=!1,k.value=!0,setTimeout(()=>{k.value=!1},2e3)},onError:()=>{t.value=!1,C.value.isError=!!Boolean(e.errors.name),b.value.isError=!!Boolean(e.errors.lat),m.value.isError=!!Boolean(e.errors.lng),w.value.isError=!!Boolean(e.errors.location_city_id)}})}function T(r){b.value=r.latLng.lat(),m.value=r.latLng.lng(),_.lat=b.value,_.lng=m.value}function K(r){b.value=r.lat,m.value=r.lng,_.lat=b.value,_.lng=m.value}return{validateTownshipNameInput:B,validateCityNameInput:f,validateLatitudeInput:g,validateLongitudeInput:E,onlyNumber:I,onlyNumberWithCustom:S,form:_,handleSubmit:D,updateCoordinates:T,setCoordinates:K,loading:t,success:k,name:C,location_city_id:w,lat:b,lng:m}},computed:{breadcrumb(){return[{label:z("core__be_dashboard_label"),url:route("admin.index")},{label:z("township_module"),url:route("township.index")},{label:z("core__be_add_township"),color:"text-primary-500"}]}},methods:{handleCancel(){this.$inertia.get(route("township.index"))}}}),me={class:"rounded-xl"},_e={class:"bg-primary-50 dark:bg-primary-900 py-2.5 ps-4 rounded-t-xl"},ce={class:"px-4 pt-6 dark:bg-backgroundDark"},be={class:"grid w-full sm:w-1/2 gap-6"},fe=l("span",{class:"text-red-800 font-medium ms-1"},"*",-1),ve={class:"rounded-md shadow-xs w-56"},ge={class:"pt-2 z-30"},ye={key:0},he={key:1},ke=["onClick"],Ce=l("span",{class:"text-red-800 font-medium ms-1"},"*",-1),we={key:0,class:"mb-6"},Pe={key:1,class:"mb-6"},$e=l("span",{class:"text-red-800 font-medium ms-1"},"*",-1),Le=l("span",{class:"text-red-800 font-medium ms-1"},"*",-1),Be={class:"mb-2.5 flex flex-row justify-end"},Ee={key:2,class:"transition-all duration-300"},Ie={key:3,class:""};function Se(e,t,k,C,w,b){const m=d("Head"),v=d("ps-breadcrumb-2"),$=d("ps-label-header-6"),u=d("ps-label"),L=d("ps-dropdown-select"),B=d("ps-dropdown"),f=d("ps-label-caption"),g=d("ps-input"),E=d("ps-textarea"),I=d("google-map-pin-picker"),S=d("open-street-map-pin-picker"),_=d("ps-button"),D=d("ps-loading"),T=d("ps-icon"),K=d("ps-card"),r=d("ps-layout");return p(),c(F,null,[n(m,{title:e.$t("core__be_add_township")},null,8,["title"]),n(r,null,{default:s(()=>[n(v,{items:e.breadcrumb,class:"mb-5 sm:mb-6 lg:mb-8"},null,8,["items"]),n(K,{class:"w-full h-auto"},{default:s(()=>[l("div",me,[l("div",_e,[n($,{textColor:"text-secondary-800 dark:text-secondary-100"},{default:s(()=>[i(a(e.$t("core__be_township_info")),1)]),_:1})]),l("div",ce,[l("form",{onSubmit:t[15]||(t[15]=V((...o)=>e.handleSubmit&&e.handleSubmit(...o),["prevent"]))},[l("div",be,[l("div",null,[n(u,{class:"text-base mb-2"},{default:s(()=>[i(a(e.$t("core__be_select_city")),1),fe]),_:1}),n(B,{align:"left",class:"lg:mt-2 mt-1 w-full"},{select:s(()=>[n(L,{placeholder:e.$t("core__be_select_city"),selectedValue:e.form.location_city_id==""?"":e.cities.filter(o=>o.id==e.form.location_city_id)[0].name,onChange:t[0]||(t[0]=o=>e.validateEmptyInput("city_id",e.form.city_id)),onBlur:t[1]||(t[1]=o=>e.validateEmptyInput("city_id",e.form.city_id))},null,8,["placeholder","selectedValue"])]),list:s(()=>[l("div",ve,[l("div",ge,[e.cities.length==null?(p(),c("div",ye,[n(u,{class:"p-2 flex",onClick:t[2]||(t[2]=o=>e.route("city.index"))},{default:s(()=>[i(a(e.$t("core__be_create_new_city")),1)]),_:1})])):(p(),c("div",he,[(p(!0),c(F,null,W(e.cities,o=>(p(),c("div",{key:o.id,class:"w-56 flex py-4 px-2 hover:bg-primary-000 dark:hover:bg-secondary-700 cursor-pointer items-center",onClick:De=>[e.form.location_city_id=o.id,e.validateEmptyInput("city_id",e.form.location_city_id)]},[n(u,{class:N(["ms-2",o.id==e.form.location_city_id?" font-bold":""])},{default:s(()=>[i(a(o.name),1)]),_:2},1032,["class"])],8,ke))),128))]))])])]),_:1}),n(f,{textColor:"text-red-500 ",class:"mt-2 block"},{default:s(()=>[i(a(e.errors.location_city_id),1)]),_:1})]),l("div",null,[n(u,{class:"text-base mb-2"},{default:s(()=>[i(a(e.$t("core__be_township_name_label")),1),Ce]),_:1}),n(g,{type:"text",value:e.form.name,"onUpdate:value":t[3]||(t[3]=o=>e.form.name=o),placeholder:e.$t("core__be_township_name_placeholder"),onKeyup:t[4]||(t[4]=o=>e.validateTownshipNameInput("name",e.form.name)),onBlur:t[5]||(t[5]=o=>e.validateTownshipNameInput("name",e.form.name))},null,8,["value","placeholder"]),n(f,{textColor:"text-red-500 ",class:"mt-2 block"},{default:s(()=>[i(a(e.errors.name),1)]),_:1})]),l("div",null,[n(u,{class:"text-base mb-2"},{default:s(()=>[i(a(e.$t("core__be_ordering_label")),1)]),_:1}),n(g,{type:"text",value:e.form.ordering,"onUpdate:value":t[6]||(t[6]=o=>e.form.ordering=o),placeholder:e.$t("core__be_ordering_placeholder"),onKeypress:e.onlyNumber},null,8,["value","placeholder","onKeypress"]),n(f,{textColor:"text-red-500 ",class:"mt-2 block"},{default:s(()=>[i(a(e.errors.ordering),1)]),_:1})]),l("div",null,[n(u,{class:"text-base mb-2"},{default:s(()=>[i(a(e.$t("core__be_description_label")),1)]),_:1}),n(E,{rows:"3",value:e.form.description,"onUpdate:value":t[7]||(t[7]=o=>e.form.description=o),placeholder:e.$t("core__be_description_placeholder")},null,8,["value","placeholder"]),n(f,{textColor:"text-red-500 ",class:"mt-2 block"},{default:s(()=>[i(a(e.errors.description),1)]),_:1})]),e.backendSettings.is_google_map==1?(p(),c("div",we,[n(I,{lat:parseFloat(e.form.lat),lng:parseFloat(e.form.lng),widthHeight:"width: 458px; height: 500px",onChange:e.updateCoordinates},null,8,["lat","lng","onChange"])])):(p(),c("div",Pe,[n(S,{dir:e.$page.props.dir,lat:16.7967129,lng:96.1609916,onChange:e.setCoordinates,class:"h-[500px]"},null,8,["dir","lat","lng","onChange"])])),l("div",null,[n(u,{class:"text-base mb-2"},{default:s(()=>[i(a(e.$t("core__be_latitude_label")),1),$e]),_:1}),n(g,{type:"text",value:e.form.lat,"onUpdate:value":t[8]||(t[8]=o=>e.form.lat=o),placeholder:e.$t("core__be_latitude_placeholder"),onKeypress:e.onlyNumberWithCustom,onKeyup:t[9]||(t[9]=o=>e.validateLatitudeInput("lat",e.form.lat)),onBlur:t[10]||(t[10]=o=>e.validateLatitudeInput("lat",e.form.lat))},null,8,["value","placeholder","onKeypress"]),e.lat==""?(p(),P(f,{key:0,textColor:"text-red-500 ",class:"mt-2 block"},{default:s(()=>[i(a(e.errors.lat),1)]),_:1})):h("",!0)]),l("div",null,[n(u,null,{default:s(()=>[i(a(e.$t("core__be_longitude_label")),1),Le]),_:1}),n(g,{type:"text",value:e.form.lng,"onUpdate:value":t[11]||(t[11]=o=>e.form.lng=o),placeholder:e.$t("core__be_longitude_placeholder"),onKeypress:e.onlyNumberWithCustom,onKeyup:t[12]||(t[12]=o=>e.validateLongitudeInput("lng",e.form.lng)),onBlur:t[13]||(t[13]=o=>e.validateLongitudeInput("lng",e.form.lng))},null,8,["value","placeholder","onKeypress"]),e.lng==""?(p(),P(f,{key:0,textColor:"text-red-500 ",class:"mt-2 block"},{default:s(()=>[i(a(e.errors.lng),1)]),_:1})):h("",!0)]),l("div",Be,[n(_,{onClick:t[14]||(t[14]=o=>e.handleCancel()),textSize:"text-base",type:"reset",class:"me-4",colors:"text-primary-500",focus:"",hover:""},{default:s(()=>[i(a(e.$t("core__be_btn_cancel")),1)]),_:1}),n(_,{class:"transition-all duration-300 min-w-3xs",padding:"px-5 py-2",rounded:"rounded",hover:"",focus:""},{default:s(()=>[e.loading?(p(),P(D,{key:0,theme:"border-2 border-t-2 border-text-8 border-t-primary-500",loadingSize:"h-5 w-5"})):h("",!0),e.success?(p(),P(T,{key:1,name:"check",viewBox:"0 0 18 14",w:"14",h:"10",class:"me-1.5 transition-all duration-300"})):h("",!0),e.success?(p(),c("span",Ee,a(e.$t("core__be_btn_saved")),1)):h("",!0),!e.loading&&!e.success?(p(),c("span",Ie,a(e.$t("core__be_btn_save")),1)):h("",!0)]),_:1})])])],32)])])]),_:1})]),_:1})],64)}var bo=ie(ue,[["render",Se]]);export{bo as default};
