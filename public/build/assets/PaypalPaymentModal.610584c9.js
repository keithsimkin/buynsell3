import S from"./PsModal.49a87bcd.js";import h from"./PsButton.81d0ce1f.js";import{u as M}from"./TokenStore.65782713.js";import{P as $}from"./PsValueStore.46e374fe.js";import x from"./PsErrorDialog.0ec3813f.js";import{d as V,i as f,o as q,c as w,b as r,w as c,a as k,q as y,t as g,F as B,z as E,r as d}from"./app.72d9fe45.js";import{d as N}from"./dropin.b1745c03.js";import{_ as T}from"./plugin-vue_export-helper.21dcd24c.js";import"./vue-neat-modal.d239f4e3.js";import"./PsLine.c7f2ab42.js";import"./PsApiService.74841eb2.js";import"./ApiStatus.5720ba0b.js";import"./PsObject.a17ef38f.js";import"./PsSepetetedStore.9a31ac47.js";import"./PsLabelTitle.8e337e9e.js";import"./PsLabel.dd7b9156.js";const D=V({name:"PaypalPaymentModal",components:{PsModal:S,PsButton:h,PsErrorDialog:x},setup(){const o=f(),e=f(),p=M(),m=$().getLoginUserId();let s,t;function a(n){n=="yes"?s():t(),o.value.toggle(!1)}async function i(n,v){o.value.toggle(!0),s=n,t=v;const b=await p.loadToken(m),l=document.querySelector("#submit-button");N.create({authorization:b.data.message,container:"#dropin-container",paypal:{flow:"vault"}},function(U,u){l==null||l.addEventListener("click",function(){u.isPaymentMethodRequestable()&&setTimeout(function(){u.requestPaymentMethod(async function(C,_){if(console.log(_),C){e.value.openModal("",E("paypal_credit_card_modal__error_paid_ad"));return}localStorage.paymentNonce=_.nonce,a("yes")})},200)})})}return{psmodal:o,ps_error_dialog:e,openModal:i,actionClicked:a}}}),z=k("div",{id:"dropin-container"},null,-1),F={class:"flex justify-center mx-auto"};function I(o,e,p,P,m,s){const t=d("ps-button"),a=d("ps-modal"),i=d("ps-error-dialog");return q(),w(B,null,[r(a,{ref:"psmodal",line:"hidden",isClickOut:!1},{body:c(()=>[z,k("div",F,[r(t,{id:"submit-button"},{default:c(()=>[y(g(o.$t("paypal_credit_card_modal__submit_payment")),1)]),_:1}),r(t,{theme:"btn-second",class:"text-center mx-4",onClick:e[0]||(e[0]=n=>o.actionClicked("no"))},{default:c(()=>[y(g(o.$t("paypal_credit_card_modal__close")),1)]),_:1})])]),_:1},512),r(i,{ref:"ps_error_dialog"},null,512)],64)}var ao=T(D,[["render",I]]);export{ao as default};
