import{P as h}from"./PsModal.9ecdc9db.js";import{P as M}from"./PsButton.75e226c0.js";import{u as $}from"./TokenStore.65782713.js";import{P as x}from"./PsValueStore.46e374fe.js";import{P as S}from"./PsErrorDialog.5174f1d4.js";import{d as q,i as d,o as w,c as B,b as n,w as p,a as v,q as P,t as k,F as E,z as N,r as m}from"./app.72d9fe45.js";import{d as T}from"./dropin.b1745c03.js";import{_ as V}from"./plugin-vue_export-helper.21dcd24c.js";import"./vue-neat-modal.d239f4e3.js";import"./PsApiService.74841eb2.js";import"./ApiStatus.5720ba0b.js";import"./PsObject.a17ef38f.js";import"./PsSepetetedStore.9a31ac47.js";import"./PsLabel.9b145d71.js";import"./PsIcon.8d64a589.js";import"./Icons.c01eddd9.js";const D=q({name:"PaypalPaymentModal",components:{PsModal:h,PsButton:M,PsErrorDialog:S},setup(){const o=d(),e=d(),u=$();x();const r=d();let s,i;function t(a){a=="yes"?s():i(),o.value.toggle(!1)}async function l(a,_,b){o.value.toggle(!0),r.value=a,s=_,i=b;const f=await u.loadToken(r.value);console.log(f);const c=document.querySelector("#submit-button");T.create({authorization:f.data.message,container:"#dropin-container",paypal:{flow:"vault"}},function(L,y){c==null||c.addEventListener("click",function(){y.isPaymentMethodRequestable()&&setTimeout(function(){y.requestPaymentMethod(async function(C,g){if(console.log(g),C){e.value.openModal("",N("paypal_credit_card_modal__error_paid_ad"));return}localStorage.paymentNonce=g.nonce,t("yes")})},200)})})}return{psmodal:o,ps_error_dialog:e,openModal:l,actionClicked:t}}}),z=v("div",{id:"dropin-container"},null,-1),F={class:"flex justify-center mx-auto"};function j(o,e,u,r,s,i){const t=m("ps-button"),l=m("ps-modal"),a=m("ps-error-dialog");return w(),B(E,null,[n(l,{ref:"psmodal",line:"hidden",isClickOut:!1},{body:p(()=>[z,v("div",F,[n(t,{id:"submit-button"},{default:p(()=>[P(k(o.$t("paypal_credit_card_modal__submit_payment")),1)]),_:1}),n(t,{theme:"btn-second",class:"text-center mx-4",onClick:e[0]||(e[0]=_=>o.actionClicked("no"))},{default:p(()=>[P(k(o.$t("paypal_credit_card_modal__close")),1)]),_:1})])]),_:1},512),n(a,{ref:"ps_error_dialog"},null,512)],64)}var ao=V(D,[["render",j]]);export{ao as default};
