import{a as I,P as m}from"./PsApiService.74841eb2.js";import{A as h}from"./ApiStatus.5720ba0b.js";import{P as y}from"./PsObject.a17ef38f.js";import{D as d}from"./DefaultPhoto.cc755f93.js";import{bD as M,u as p,D as C}from"./app.72d9fe45.js";import{m as g}from"./PsSepetetedStore.9a31ac47.js";class l extends y{constructor(){super(...arguments),this.cartItemId="",this.itemId="",this.itemName="",this.originalPrice="",this.salePrice="",this.discountPrice="",this.vendorCurrencySymbol="",this.quantity="",this.availableQuantity="",this.subTotal="",this.isSoldOut="",this.isSelect="",this.defaultPhoto=new d}init(t,e,r,n,o,u,i,s,a,f,v,S,P){return this.cartItemId=t,this.itemId=e,this.itemName=r,this.originalPrice=n,this.salePrice=o,this.discountPrice=u,this.vendorCurrencySymbol=i,this.quantity=s,this.availableQuantity=a,this.subTotal=f,this.isSoldOut=v,this.isSelect=S,this.defaultPhoto=P,this}getPrimaryKey(){return this.cartItemId}toMap(t){const e={};return e.cart_item_id=t.cartItemId,e.item_id=t.itemId,e.item_name=t.itemName,e.original_price=t.originalPrice,e.sale_price=t.salePrice,e.discount_price=t.discountPrice,e.vendor_currency_symbol=t.vendorCurrencySymbol,e.quantity=t.quantity,e.available_quantity=t.availableQuantity,e.sub_total=t.subTotal,e.is_sold_out=t.isSoldOut,e.is_select=t.isSelect,e.default_photo=new d().toMap(t.defaultPhoto),e}toMapList(t){const e=[];for(let r=0;r<t.length;r++)t[r]!=null&&e.push(this.toMap(t[r]));return e}fromMap(t){return new l().init(t.cart_item_id,t.item_id,t.item_name,t.original_price,t.sale_price,t.discount_price,t.vendor_currency_symbol,t.quantity,t.available_quantity,t.sub_total,t.is_sold_out,t.is_select,new d().fromMap(t.default_photo))}fromMapList(t){const e=[];for(const r of t)r!=null&&e.push(this.fromMap(r));return e}}class c extends y{constructor(){super(...arguments),this.items=[new l],this.vendorId="",this.vendorCurrencySymbol="",this.vendorCurrencyShortForm="",this.subTotal="",this.totalDiscount="",this.deliveryFee="",this.total=""}init(t,e,r,n,o,u,i,s){return this.items=t,this.vendorId=e,this.vendorCurrencySymbol=r,this.vendorCurrencyShortForm=n,this.subTotal=o,this.totalDiscount=u,this.deliveryFee=i,this.total=s,this}getPrimaryKey(){return""}toMap(t){const e={};return e.items=new l().toMapList(t.items),e.vendor_id=t.vendorId,e.vendor_currency_symbol=t.vendorCurrencySymbol,e.vendor_currency_short_form=t.vendorCurrencyShortForm,e.sub_total=t.subTotal,e.total_discount=t.totalDiscount,e.delivery_fee=t.deliveryFee,e.total=t.total,e}toMapList(t){const e=[];for(let r=0;r<t.length;r++)t[r]!=null&&e.push(this.toMap(t[r]));return e}fromMap(t){return new c().init(new l().fromMapList(t.items),t.vendor_id,t.vendor_currency_symbol,t.vendor_currency_short_form,t.sub_total,t.total_discount,t.delivery_fee,t.total)}fromMapList(t){const e=[];for(const r of t)r!=null&&e.push(this.fromMap(r));return e}}const L=g(_=>M(`addToCartStore/${_}`,()=>{const t=p({value:!1}),e=p(new I);async function r(i,s){t.value=!0;const a=await m.getAllItemFromCart(new c,i,s);return e.data=a.code==204?null:a.data,e.code=a.code,e.status=a.status,e.message=a.message,t.value=!1,e}async function n(i,s){t.value=!0;const a=await m.postAddToCart(new h,i,s.toMap());return t.value=!1,a}async function o(i,s){t.value=!0;const a=await m.postDeleteItemsFromCart(new h,i,s.toMap());return t.value=!1,a}const u=C(()=>e.data?e.data.items.reduce((i,s)=>i+parseInt(s.quantity),0):0);return{cart:e,getAllItemFromCart:r,addToCart:n,deleteItemsFromCart:o,loading:t,totalQuantity:u}}));export{L as u};
