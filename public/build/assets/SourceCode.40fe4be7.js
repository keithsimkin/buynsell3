import{U as x}from"./UpdaterLayout.b44453e0.js";import{P as N}from"./PsButton.75e226c0.js";import{P as $}from"./PsLoadingCircleDialog.70b57269.js";import{P as b}from"./PsErrorDialog.5174f1d4.js";import{P as k}from"./PsSuccessDialog.4b6e8f79.js";import{P as U}from"./PsReloadDialog.768c0135.js";import{d as w,p as B,i as r,O as y,o as p,c as D,b as a,w as _,a as v,t as u,f as P,q as C,z as l,Q as M,r as s}from"./app.72d9fe45.js";import{_ as E}from"./plugin-vue_export-helper.21dcd24c.js";import"./PsIcon.8d64a589.js";import"./Icons.c01eddd9.js";import"./PsModal.9ecdc9db.js";import"./vue-neat-modal.d239f4e3.js";import"./PsLabel.9b145d71.js";import"./PsLoading.1f14f5af.js";const R=w({components:{UpdaterLayout:x,Link:B,PsButton:N,PsLoadingCircleDialog:$,PsErrorDialog:b,PsSuccessDialog:k,PsReloadDialog:U},props:["status"],setup(e){const o=r(),g=r(),m=r(),d=r(),c=r(0),t=window.location.search;new URLSearchParams(t).has("next")&&y.get(route("NextLaravelUpdater::addNewLangString"));function i(){y.post(route("NextLaravelUpdater::sourceCodeSync"),{},{onBefore:()=>{o.value.openModal(l("core__be_source_code_title"),l("core__be_source_code_syncing_note"))},onSuccess:n=>{console.log(M().props.status),e.status.flag=="success"&&(location.reload(!0),c.value=1,o.value.closeModal())},onError:n=>{o.value.closeModal(),d.value.openModal(l("ps_error_dialog__error"),l(n.message),"Reload","NextLaravelUpdater::sourceCode",!1,"alert-triangle")}})}return{handleCodeSync:i,ps_loading_circle_dialog:o,ps_error_dialog:g,isGoNext:c,ps_success_dialog:m,ps_reload_dialog:d}}}),V={class:"paragraph text-center"},q={class:"buttons"};function G(e,o,g,m,d,c){const t=s("ps-button"),f=s("UpdaterLayout"),i=s("ps-loading-circle-dialog"),n=s("ps-error-dialog"),S=s("ps-success-dialog"),L=s("ps-reload-dialog");return p(),D("div",null,[a(f,{title:"code_update"},{container:_(()=>[v("p",V,u(e.$t("code_update_desc")),1),v("div",q,[e.isGoNext?(p(),P(t,{key:0,onClick:o[0]||(o[0]=h=>e.handleCodeSync()),class:"button",type:"reset",padding:"px-7 py-2",rounded:"rounded",hover:""},{default:_(()=>[C(u(e.$t("go_next")),1)]),_:1})):(p(),P(t,{key:1,onClick:o[1]||(o[1]=h=>e.handleCodeSync()),class:"button",type:"reset",padding:"px-7 py-2",rounded:"rounded",hover:""},{default:_(()=>[C(u(e.$t("code_sync")),1)]),_:1}))])]),_:1}),a(i,{ref:"ps_loading_circle_dialog"},null,512),a(n,{ref:"ps_error_dialog"},null,512),a(S,{ref:"ps_success_dialog"},null,512),a(L,{ref:"ps_reload_dialog"},null,512)])}var Z=E(R,[["render",G]]);export{Z as default};
