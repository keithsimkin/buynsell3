import{d as F,Z as j,p as q,i as u,E as A,j as R,z as _,o as v,c as $,b as r,w as l,a as p,q as d,t as i,h as Z,m as G,f as K,g as E,F as J,r as n,C as O}from"./app.72d9fe45.js";import{P as Q}from"./PsLayout.847d3bb7.js";import{u as V}from"./Validators.f69d3a03.js";import W from"./CheckBox.92a2a527.js";import X from"./RoleCheckbox.6767aad4.js";import{P as Y}from"./PsInput.afea411a.js";import{P as N}from"./PsLabel.9b145d71.js";import{P as x}from"./PsButton.75e226c0.js";import{P as ee}from"./PsTextarea.b6da5576.js";import{P as oe}from"./PsLabelHeader4.cfe9ad61.js";import{P as se}from"./PsIcon.8d64a589.js";import{P as re}from"./PsLoading.1f14f5af.js";import{P as te}from"./PsLabelCaption.0e118b2b.js";import{P as ae}from"./PsBreadcrumb2.c233a04a.js";import{a as le,P as ne}from"./PsActionModal.f08d8887.js";import{d as ie}from"./PsDangerDialog.4a7cc4cb.js";import{_ as pe}from"./plugin-vue_export-helper.21dcd24c.js";import"./PsDropdown.dd6513b3.js";import"./PsDropdownSelect.2cfdee10.js";import"./PsToggle.8b891384.js";import"./toggle.11911129.js";import"./PsWarningDialog.632500d7.js";import"./PsModal.9ecdc9db.js";import"./vue-neat-modal.d239f4e3.js";import"./index.esm.159b9749.js";import"./auth.esm.925cebae.js";import"./SidebarMenuItem.9469c8c6.js";import"./SidebarSubTab.7743e9bd.js";import"./PsErrorDialog.5174f1d4.js";import"./PsInputWithRightIcon.e27f7629.js";import"./PsSuccessDialog.4b6e8f79.js";import"./PsBannerIcon.ba5a991b.js";import"./PsIcon1.56bc2bff.js";import"./Icons.c01eddd9.js";import"./PsLoadingCircleDialog.70b57269.js";import"./PsDraggable.2c92160e.js";const de=F({name:"Edit",components:{Head:j,Link:q,CheckBox:W,RoleCheckbox:X,PsInput:Y,PsLabel:N,PsButton:x,PsTextarea:ee,PsLabelHeader4:oe,PsIcon:se,PsLabelCaption:te,PsLoading:re,PsBreadcrumb2:ae,PsActionModal:le,PsImageIconModal:ne,PsDangerDialog:ie},layout:Q,props:["errors","user","custom_field_headers"],setup(e){const o=u(!1),g=u(!1),C=u(!1),I=u(!1),B=u(!1),k=u(!1);let c=A({name:e.user.name,email:e.user.email,user_address:e.user.user_address,user_about_me:e.user.user_about_me,user_cover_photo:"",is_show_email:e.user.is_show_email==1,is_show_phone:e.user.is_show_phone==1,custom_fields:[],permissions:"",_method:"put"});const P=u(),f=u(),h=u(),{isEmpty:b,isNum:S,isEmail:M}=V(),D=(s,a,m="")=>{e.errors[s]=a?"":b(s,a,m),s=="name"&&(C.value.isError=!0),s=="password"&&(B.value.isError=!0),s=="conf_password"&&(k.value.isError=!0)},y=(s,a,m="",H="")=>{e.errors[s]=a?M(s,a,H):b(s,a,m),s=="email"&&(I.value.isError=!0)},w=(s,a,m="",H="")=>{e.errors[s]=a?S(s,a,H):b(s,a,m)},U=s=>{let a=s.keyCode?s.keyCode:s.which;(a<48||a>57)&&s.preventDefault()};function L(s){this.$inertia.post(route("registered_user.update",s),c,{forceFormData:!0,onBefore:()=>{o.value=!0},onSuccess:()=>{o.value=!1,g.value=!0,setTimeout(()=>{g.value=!1},2e3)},onError:()=>{o.value=!1}})}function z({data:s,id:a}){c.custom_fields[a]=s.toString()}function T({data:s}){c.permissions=s.toString()}R(()=>{e.user_custom_fields.map((s,a)=>{let m=s.data;c.custom_fields[s.custom_field_header_id]=m==="1"?!0:m==="0"?!1:m})});function t(s){P.value.openModal(_("conf_modal_label"),_("core__be_replace_img_label"),_("core__be_remove_img_label"),"image","trash","24","24",()=>{f.value.openModal()},()=>{h.value.openModal(_("core__be_remove_label"),_("core__be_are_u_sure_remove_photo"),_("core__be_btn_confirm"),_("core__be_btn_cancel"),()=>{this.$inertia.delete(route("image.destroy",s),{onBefore:()=>{o.value=!0},onSuccess:()=>{o.value=!1,g.value=!0,setTimeout(()=>{g.value=!1},2e3)},onError:()=>{o.value=!1}})},()=>{})})}return{validateEmptyInput:D,validateEmailInput:y,validateNumberInput:w,onlyNumber:U,form:c,handleSubmit:L,handleMultiSelect:z,handleUserMultiSelect:T,loading:o,success:g,replaceImageClicked:t,ps_danger_dialog:h,ps_image_icon_modal:f,ps_action_modal:P,input_name:C,input_email:I,input_password:B,input_confirm_password:k}},computed:{breadcrumb(){return[{label:_("core__be_dashboard_label"),url:route("admin.index")},{label:_("profile_label"),url:route("registered_user.index")},{label:"Edit Profile",color:"text-primary-500"}]}}}),me={class:"rounded-xl"},ue={class:"bg-primary-50 text-secondary-800 py-2.5 ps-4"},_e={class:"px-4 pt-6 dark:bg-backgroundDark"},fe={class:"grid w-full sm:w-1/2 gap-6"},ce={key:0,class:"flex items-end pt-4"},be={class:"flex flex-row justify-end mb-2.5"},ve={key:2,class:"transition-all duration-300"},ge={key:3,class:""};function ye(e,o,g,C,I,B){const k=n("Head"),c=n("ps-breadcrumb-2"),P=n("ps-label-header-6"),f=n("ps-label"),h=n("ps-icon"),b=n("ps-button"),S=n("ps-image-icon-modal"),M=n("ps-action-modal"),D=n("ps-danger-dialog"),y=n("ps-input"),w=n("ps-label-caption"),U=n("ps-loading"),L=n("ps-card"),z=n("ps-layout"),T=O("lazy");return v(),$(J,null,[r(k,{title:e.$t("edit_notification")},null,8,["title"]),r(z,null,{default:l(()=>[r(c,{items:e.breadcrumb,class:"mb-5 sm:mb-6 lg:mb-8"},null,8,["items"]),r(L,{class:"w-full h-auto"},{default:l(()=>[p("div",me,[p("div",ue,[r(P,{textColor:"text-secondary-800 dark:text-secondary-100"},{default:l(()=>[d(i(e.$t("core__be_user_info")),1)]),_:1})]),p("div",_e,[p("form",{onSubmit:o[16]||(o[16]=Z(t=>e.handleSubmit(e.user.id),["prevent"]))},[p("div",fe,[p("div",null,[r(f,{class:"text-base"},{default:l(()=>[d(i(e.$t("profile_photo")),1)]),_:1}),e.user.user_cover_photo?(v(),$("div",ce,[G(p("img",{width:"200",height:"200",class:"",alt:"Profile photo",onError:o[0]||(o[0]=t=>"/images/assets/default_profile.png")},null,544),[[T,{src:e.$page.props.uploadUrl+"/"+e.user.user_cover_photo,loading:e.$page.props.sysImageUrl+"/loading_gif.gif",error:e.$page.props.sysImageUrl+"/default_profile.png"}]]),r(b,{type:"button",onClick:o[1]||(o[1]=t=>e.replaceImageClicked(e.user.user_cover_photo)),rounded:"rounded-full",shadow:"drop-shadow-2xl",class:"-ms-10 mb-2",colors:"bg-white text-primary-500",padding:"p-1.5",hover:"",focus:""},{default:l(()=>[r(h,{name:"editPencil",w:"19",h:"19"})]),_:1}),r(S,{ref:"ps_image_icon_modal"},null,512),r(M,{ref:"ps_action_modal"},null,512),r(D,{ref:"ps_danger_dialog"},null,512)])):(v(),$("input",{key:1,type:"file",accept:"image/*",onInput:o[2]||(o[2]=t=>e.form.user_cover_photo=t.target.files[0])},null,32))]),p("div",null,[r(f,{class:"text-base"},{default:l(()=>[d(i(e.$t("user_name_label")),1)]),_:1}),r(y,{type:"text",value:e.form.name,"onUpdate:value":o[3]||(o[3]=t=>e.form.name=t),placeholder:e.$t("user_name_label"),onKeyup:o[4]||(o[4]=t=>e.validateEmptyInput("name",e.form.name)),onBlur:o[5]||(o[5]=t=>e.validateEmptyInput("name",e.form.name))},null,8,["value","placeholder"]),r(w,{textColor:"text-red-500 ",class:"mt-2 block"},{default:l(()=>[d(i(e.errors.name),1)]),_:1})]),p("div",null,[r(f,{class:"text-base"},{default:l(()=>[d(i(e.$t("email_label")),1)]),_:1}),r(y,{type:"text",value:e.form.email,"onUpdate:value":o[6]||(o[6]=t=>e.form.email=t),placeholder:e.$t("email_label"),onKeyup:o[7]||(o[7]=t=>e.validateEmailInput("email",e.form.email)),onBlur:o[8]||(o[8]=t=>e.validateEmailInput("email",e.form.email))},null,8,["value","placeholder"]),r(w,{textColor:"text-red-500 ",class:"mt-2 block"},{default:l(()=>[d(i(e.errors.email),1)]),_:1})]),p("div",null,[r(f,{class:"text-base"},{default:l(()=>[d(i(e.$t("password_label")),1)]),_:1}),r(y,{ref:"input_password",type:"password",value:e.form.password,"onUpdate:value":o[9]||(o[9]=t=>e.form.password=t),placeholder:e.$t("password_label"),onKeyup:o[10]||(o[10]=t=>e.validateEmptyInput("password",e.form.password)),onBlur:o[11]||(o[11]=t=>e.validateEmptyInput("password",e.form.password))},null,8,["value","placeholder"]),r(w,{textColor:"text-red-500 ",class:"mt-2 block"},{default:l(()=>[d(i(e.errors.password),1)]),_:1})]),p("div",null,[r(f,{class:"text-base"},{default:l(()=>[d(i(e.$t("conf_password_label")),1)]),_:1}),r(y,{ref:"input_confirm_password",type:"password",value:e.form.conf_password,"onUpdate:value":o[12]||(o[12]=t=>e.form.conf_password=t),placeholder:e.$t("conf_password_label"),onKeyup:o[13]||(o[13]=t=>e.validateEmptyInput("conf_password",e.form.conf_password)),onBlur:o[14]||(o[14]=t=>e.validateEmptyInput("conf_password",e.form.conf_password))},null,8,["value","placeholder"]),r(w,{textColor:"text-red-500 ",class:"mt-2 block"},{default:l(()=>[d(i(e.errors.conf_password),1)]),_:1})]),p("div",be,[r(b,{onClick:o[15]||(o[15]=t=>e.handleCancel()),textSize:"text-base",type:"reset",class:"me-4",colors:"text-primary-500",focus:"",hover:""},{default:l(()=>[d(i(e.$t("core__be_btn_cancel")),1)]),_:1}),r(b,{class:"transition-all duration-300 min-w-3xs",padding:"px-5 py-2",rounded:"rounded",hover:"",focus:""},{default:l(()=>[e.loading?(v(),K(U,{key:0,theme:"border-2 border-t-2 border-text-8 border-t-primary-500",loadingSize:"h-5 w-5"})):E("",!0),e.success?(v(),K(h,{key:1,name:"check",w:"20",h:"20",class:"me-1.5 transition-all duration-300"})):E("",!0),e.success?(v(),$("span",ve,i(e.$t("core__be_btn_saved")),1)):E("",!0),!e.loading&&!e.success?(v(),$("span",ge,i(e.$t("core__be_btn_save")),1)):E("",!0)]),_:1})])])],32)])])]),_:1})]),_:1})],64)}var so=pe(de,[["render",ye]]);export{so as default};
