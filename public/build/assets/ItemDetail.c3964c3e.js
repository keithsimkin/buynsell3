import{bD as Ot,u as Nt,Z as Rt,i as n,j as Ht,k as qt,D as zt,o as G,c as Ft,b as o,w as H,a as m,t as Wt,g as At,f as Ct,F as Bt,z as bt,O as Gt,r as l}from"./app.72d9fe45.js";import{P as q}from"./ps_constants.ea9d0b33.js";import Kt from"./PsIcon.c404b5b9.js";import jt from"./PsContentContainer.42cd0324.js";import Yt from"./GalleryDetailHorizontalSwiper.0ead65c5.js";import Qt from"./GalleryVerticalSwiper.0adc29d0.js";import Zt from"./PsLoadingDialog.52bc8b7d.js";import Jt from"./PsConfirmDialog.fdc5ff76.js";import Xt from"./PsErrorDialog.0ec3813f.js";import $t from"./PsFrontendLayout.374c3b62.js";import te from"./PsBreadcrumb2.bcdabe6c.js";import ee from"./UserListHorizontal.ce50b529.js";import oe from"./VendorProfileCard.900bae00.js";import ae from"./PsLearnMoreDialog.3f1b5f8d.js";import re from"./ItemDetailPriceInfoCard.4a3674ce.js";import ie from"./ItemDetailLearnMoreCard.6d807cdd.js";import le from"./ItemDetailLocationCard.0e57ec9e.js";import de from"./ItemDetailInfoCard.816db083.js";import ne from"./ItemDetailStatisticCard.29d15f6a.js";import me from"./ItemDetailRelatedItemHorizontalList.aa1b1352.js";import se from"./ItemDetailShareAndReport.75f19190.js";import ce from"./ItemDetailUserListHorizontal.235f63f7.js";import{u as Mt}from"./ProductStore.017d2a02.js";import{P as pe}from"./PsValueStore.46e374fe.js";import{u as Et}from"./GalleryStore.102224a6.js";import{u as ue}from"./AboutUsStore.37881ff8.js";import{u as _e}from"./FavouriteItemStore.e64977ef.js";import{u as fe}from"./AppInfoStore.3eac0301.js";import{a as ge,P as ve}from"./PsApiService.74841eb2.js";import{A as Ie}from"./ApiStatus.5720ba0b.js";import{m as ye}from"./PsSepetetedStore.9a31ac47.js";import{P as Se}from"./ProductParameterHolder.b9a2d040.js";import{A as he}from"./AppInfoParameterHolder.e24d894d.js";import{T as Ce}from"./TouchCountParameterHolder.9ce47d98.js";import{u as Vt}from"./CustomFieldStore.48623ce1.js";import{_ as be}from"./plugin-vue_export-helper.21dcd24c.js";import"./PsImageModal.42dac1c3.js";import"./vue-neat-modal.d239f4e3.js";import"./DefaultPhoto.cc755f93.js";import"./PsObject.a17ef38f.js";import"./PsUtils.eb7a8002.js";import"./vue-splide.esm.01499f7d.js";/* empty css                   */import"./GalleryHorizontalItem.dca55b1b.js";import"./PsGalleryModal.35a5d961.js";import"./PsModal.49a87bcd.js";import"./PsLine.c7f2ab42.js";import"./PsLabel.dd7b9156.js";import"./PsButton.81d0ce1f.js";import"./PsLabelTitle.8e337e9e.js";import"./FooterView.a2566be6.js";import"./FooterLinkSection.2019a7c6.js";import"./PsLink.26c0aa15.js";import"./PsRouteLink.ab373f40.js";import"./PsLabelCaption.9bd8d857.js";import"./PsNavTabBar.f7d96f93.js";import"./PsDropdown.05bf646c.js";import"./PsDropdownSelect.405216fe.js";import"./PsIconToggle.4c2e7ec1.js";import"./PsInputWithLeftIcon.b188023e.js";import"./LocationModal.d02e80d4.js";import"./LocationParameterHolder.eedeb824.js";import"./ItemLocationTownship.94979fe0.js";import"./ItemLocationTownshipStore.024edc3b.js";import"./PsNavBar.42e9d556.js";import"./UserStore.e188dd03.js";import"./User.0c3ba1a8.js";import"./RatingDetail.291ad5d1.js";import"./ProductRelation.0b376978.js";import"./UserListParameterHolder.d110b747.js";import"./index.esm.159b9749.js";import"./auth.esm.925cebae.js";import"./UserUnReadMessageParameterHolder.402a8a72.js";import"./AddToCartStore.7e3033c2.js";import"./PsNotificationBox.38ef8701.js";import"./Phone.45f97258.js";import"./Product.0519ee40.js";import"./Category.7c65464b.js";import"./DefaultIcon.e76b39a5.js";import"./SubCategory.1b4176e0.js";import"./ItemCurrency.91c8ce91.js";import"./Vendor.d946ee87.js";import"./UserDeleteItemParameterHolder.5d816aba.js";import"./NotificationStore.09902b99.js";import"./NotiUnRegisterHolder.eefb692e.js";import"https://unpkg.com/delayed-scroll-restoration-polyfill@0.1.1/index.js";import"./PsCard.c6bb6e2a.js";import"./RatingShow.f25d8e9c.js";import"./UserListStore.846fce4f.js";import"./UserFollowHolder.8b598f9e.js";import"./moment.9709ab41.js";import"./PsSuccessToast.3ce4aabe.js";import"./format.min.1a01be2e.js";import"./OfferStore.509cccf6.js";import"./ProductStatusChangeParameterHolder.1fcea3b1.js";import"./AddToCartParameterHolder.013fdbb4.js";import"./ItemHorizontalSwiper.24204fb9.js";/* empty css                        */import"./ItemHorizontalItem.1d41cc35.js";import"./PsLabelTitle4.90166f3a.js";import"./PsAdSense.e3562fb6.js";import"./PsValueHolder.64e68efd.js";import"./FollowItemParameterHolder.54ad8b57.js";/* empty css                                                                       */import"./ItemHorizontalSkeletorItem.4a35f291.js";import"./vue-skeletor.esm.437103df.js";/* empty css                     */import"./ShareToSocialModal.ca6a97bd.js";import"./PsSuccessDialog.ab656243.js";import"./ReportedItemStore.b4506794.js";import"./PsStore.813293a8.js";const Pe=ye(c=>Ot(`touchCountStore/${c}`,()=>{const _=Nt(new ge),z=Nt({value:!1});let t=10,e=0,p="";async function y(f,K){z.value=!0,await ve.postTouchCount(new Ie,f,K.toMap()),z.value=!1}return{touchcount:_,loading:z,limit:t,offset:e,id:p,postTouchCount:y}})),Ae={name:"ItemDetailView",components:{PsLearnMoreDialog:ae,PsContentContainer:jt,PsBreadcrumb2:te,PsConfirmDialog:Jt,PsLoadingDialog:Zt,PsErrorDialog:Xt,GalleryDetailHorizontalSwiper:Yt,UserListHorizontal:ee,GalleryVerticalSwiper:Qt,Head:Rt,ItemDetailPriceInfoCard:re,ItemDetailLearnMoreCard:ie,ItemDetailLocationCard:le,ItemDetailInfoCard:de,ItemDetailStatisticCard:ne,ItemDetailRelatedItemHorizontalList:me,ItemDetailShareAndReport:se,ItemDetailUserListHorizontal:ce,VendorProfileCard:oe,PsIcon:Kt},layout:$t,props:["query"],setup(c){const _=c.query.item_id,z="",t=Mt("related_item"),e=Mt("detail"),p=Et("detail"),y=Et("video"),f=ue(),K=_e();t.paramHolder=new Se().getRelatedProductParameterHolder();const g=Pe(),st=Vt("detail"),j=Vt("owner"),Y=n(!1),Q=n(1);let Z=n(0),J=n(""),X=n(!1);const v=n(!1),ct=n(!1),pt=n(!0),ut=pe(),d=n(ut.getLoginUserId()),M=n(),E=n(),_t=n(),W=n(!1),V=n(),O=new Ce,s=fe(),$=new he;$.userId=ut.getLoginUserId();let ft=n(!1),tt=n([]);Ht(async()=>{B(),O.typeId=_,O.userId=d.value,O.typeName="item",d.value!="nologinuser"&&g.postTouchCount(d.value,O),V.value||(V.value=s.isAllPaymentDisable())}),qt(()=>{e.item.data=null,p.galleryList.data=null,y.galleryList.data=null}),yt();function gt(){var a,r;E.value.openModal("item_detail__safety_tips",(r=(a=f.aboutus)==null?void 0:a.data)==null?void 0:r.safetyTips)}function vt(){var a,r;E.value.openModal("term_and_condition__term_and_condition",(r=(a=f.aboutus)==null?void 0:a.data)==null?void 0:r.termsAndConditions)}function It(){var a,r;E.value.openModal("item_detail__faq",(r=(a=f.aboutus)==null?void 0:a.data)==null?void 0:r.faqPage)}async function B(){var a,r,u,S,h,C,b,P,A,x,L,w,D,k,U,T,N,F;await f.loadAboutUs(d.value),await e.loadItem(_,d.value),await j.loadUserCustomFieldList(d.value),tt.value=e.loadProductRelation(["ps-itm00002","ps-itm00004","ps-itm00007"]);for(const i of(a=j.customField.data)==null?void 0:a.customList)if(i.coreKeysId==q.WHATSAPP_CORE_KEY_Id&&i.isVisible=="1"){const I=(S=(u=(r=e.item)==null?void 0:r.data)==null?void 0:u.user)==null?void 0:S.userRelation.filter(R=>R.coreKeysId==q.WHATSAPP_CORE_KEY_Id);I.length!=0&&((h=I[0])==null?void 0:h.value)!=null&&(J.value=(C=I[0])==null?void 0:C.value)}console.log(e),console.log((P=(b=e.item)==null?void 0:b.data)==null?void 0:P.vendor),X.value=((x=(A=e.item)==null?void 0:A.data)==null?void 0:x.vendor.expireStatus)==q.VendorExpiryExpiredStatus,v.value=((D=(w=(L=e.item)==null?void 0:L.data)==null?void 0:w.user)==null?void 0:D.userId)==d.value,ct.value=((T=(U=(k=e.item)==null?void 0:k.data)==null?void 0:U.vendor)==null?void 0:T.id)!="";for(const i of(F=(N=e.item)==null?void 0:N.data)==null?void 0:F.productRelation)pt.value=i.coreKeysId=="ps-itm00046";await p.resetGalleryList(d.value,_,q.ITEM__RELATED_TYPE),t.paramHolder.catId=e.item.data.catId,await t.resetProductList(d.value,t.paramHolder),s.isShowItemVideo()?(y.galleryList.data=p.galleryList.data.filter(i=>i.imgType!="item-video-icon"),p.galleryList.data=p.galleryList.data.filter(i=>i.imgType!="item-video")):(y.galleryList.data=p.galleryList.data.filter(i=>i.imgType!="item-video-icon"&&i.imgType!="item-video"),p.galleryList.data=p.galleryList.data.filter(i=>i.imgType!="item-video"&&i.imgType!="item-video-icon")),e.promoteStatus()&&!V.value?W.value=!0:W.value=!1,await st.loadCustomFieldList(d.value),Y.value=!0}async function yt(){await s.loadAppInfo($),s.isShowItemVideo()==q.ONE&&(ft.value=!0),parseInt(s.maxImgUploadOfItem())>=1&&(Q.value=parseInt(s.maxImgUploadOfItem()),Z.value=Q.value+1)}async function St(){d.value&&d.value!=q.NO_LOGIN_USER?(M.value.openModal(),e.isFavourite()?M.value.message=bt("item_detail__removing_item_from_favourite"):M.value.message=bt("item_detail__adding_item_to_favourite"),await K.postFavourite(_,d.value),await B(),M.value.closeModal()):Gt.get(route("login"))}const ht=zt(()=>{var a,r,u,S,h,C,b,P,A,x,L,w,D,k,U,T,N,F,i,I,R,et,ot,at,rt,it,lt,dt,nt,mt,xt,Lt,wt,Dt,kt,Ut,Tt;return(s==null?void 0:s.isShowSubCategory())||e.subCategoryIdIsEmpty()?[{label:bt("ps_nav_bar__home"),url:route("dashboard")},{label:(u=(r=(a=e.item)==null?void 0:a.data)==null?void 0:r.category)==null?void 0:u.catName,url:route("fe_item_list",{cat_id:(C=(h=(S=e.item)==null?void 0:S.data)==null?void 0:h.category)==null?void 0:C.catId,cat_name:(A=(P=(b=e.item)==null?void 0:b.data)==null?void 0:P.category)==null?void 0:A.catName,status:1})},{label:(L=(x=e.item)==null?void 0:x.data)==null?void 0:L.title,color:"text-fePrimary-500"}]:[{label:bt("ps_nav_bar__home"),url:route("dashboard")},{label:(k=(D=(w=e.item)==null?void 0:w.data)==null?void 0:D.category)==null?void 0:k.catName,url:route("fe_item_list",{cat_id:(N=(T=(U=e.item)==null?void 0:U.data)==null?void 0:T.category)==null?void 0:N.catId,cat_name:(I=(i=(F=e.item)==null?void 0:F.data)==null?void 0:i.category)==null?void 0:I.catName,status:1})},{label:(ot=(et=(R=e.item)==null?void 0:R.data)==null?void 0:et.subCategory)==null?void 0:ot.name,url:route("fe_item_list",{cat_id:(it=(rt=(at=e.item)==null?void 0:at.data)==null?void 0:rt.category)==null?void 0:it.catId,cat_name:(nt=(dt=(lt=e.item)==null?void 0:lt.data)==null?void 0:dt.category)==null?void 0:nt.catName,sub_cat_id:(Lt=(xt=(mt=e.item)==null?void 0:mt.data)==null?void 0:xt.subCategory)==null?void 0:Lt.id,sub_cat_name:(kt=(Dt=(wt=e.item)==null?void 0:wt.data)==null?void 0:Dt.subCategory)==null?void 0:kt.name,status:1})},{label:(Tt=(Ut=e.item)==null?void 0:Ut.data)==null?void 0:Tt.title,color:"text-fePrimary-500"}]});return{loadDataForItemDetail:B,dataReady:Y,appInfoProvider:s,loginUserId:d,itemId:_,itemName:z,productStore:e,galleryProvider:p,videoStore:y,aboutUsProvider:f,favouriteClicked:St,ps_loading_dialog:M,ps_learn_more_dialog:E,gallery_detail:_t,isPromote:W,PsConst:q,safetyTip:gt,termsAndConditions:vt,faq:It,totalCount:Z,imageCount:Q,itemCustomFieldStore:st,relatedItemStore:t,productRelation:tt,isAllPaymentDisable:V,whatsAppNo:J,breadcrumb:ht,relatedItem:()=>{var r;let a=[];return a.push(_),(r=t.itemList)==null?void 0:r.data.filter(u=>a.indexOf(u.id)==-1)},isVendorExpired:X,isOwner:v,isUploadedByVendor:ct,hasQty:pt}}},xe={class:"mt-32 mb-10"},Le={class:"mb-4 flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 mt-24"},we={key:0,class:"mt-10 mb-10 w-full h-20 bg-feWarning-100 rounded-lg mx-auto border border-md border-feWarning-500 py-5 px-10 mb-4 dark:bg-feWarning-800 dark:border-none flex justify-start items-center"},De={class:"me-5"},ke={class:"text-feAchromatic-800 dark:text-feAchromatic-100"},Ue={class:"grid grid-cols-1 sm:grid-cols-12 gap-4"},Te={class:"col-span-1 sm:col-span-7 md:col-span-8"},Ne={class:"mt-6 sm:hidden"},Fe={class:"sm:hidden block border-2 border-feSecondary-200 rounded-md mt-4"},Me={class:"col-span-1 sm:col-span-5 md:col-span-4 hidden sm:block"},Ee={class:"border-2 border-feSecondary-200 rounded-md mt-4"};function Ve(c,_,z,t,e,p){const y=l("Head"),f=l("ps-breadcrumb-2"),K=l("item-detail-share-and-report"),g=l("ps-icon"),st=l("gallery-vertical-swiper"),j=l("item-detail-price-info-card"),Y=l("item-detail-statistic-card"),Q=l("item-detail-info-card"),Z=l("vendor-profile-card"),J=l("item-detail-user-list-horizontal"),X=l("item-detail-location-card"),v=l("item-detail-learn-more-card"),ct=l("item-detail-related-item-horizontal-list"),pt=l("ps-content-container"),ut=l("ps-loading-dialog"),d=l("gallery-detail-horizontal-swiper"),M=l("ps-learn-more-dialog");return G(),Ft(Bt,null,[o(y,{title:c.$t("item__detail")},null,8,["title"]),o(pt,null,{content:H(()=>{var E,_t,W,V,O,s,$,ft,tt,gt,vt,It,B,yt,St,ht,Pt,a,r,u,S,h,C,b,P,A,x,L,w,D,k,U,T,N,F,i,I,R,et,ot,at,rt,it,lt,dt,nt,mt;return[m("div",xe,[m("div",Le,[o(f,{items:t.breadcrumb},null,8,["items"]),o(K,{loginUserId:t.loginUserId,itemId:t.itemId,itemName:t.itemName},null,8,["loginUserId","itemId","itemName"])]),((_t=(E=t.productStore.item)==null?void 0:E.data)==null?void 0:_t.vendor.expireStatus)==t.PsConst.VendorExpiryExpiredStatus?(G(),Ft("div",we,[m("div",De,[o(g,{textColor:"text-feWarning-500",class:"pt-1",w:"30",h:"30",name:"warning-triangle"})]),m("div",ke,Wt(c.$t("subscription_expired_text")),1)])):At("",!0),m("div",Ue,[m("div",Te,[o(st,{galleryList:(W=t.galleryProvider.galleryList)==null?void 0:W.data,video:(V=t.videoStore.galleryList)==null?void 0:V.data,isLoading:!(t.galleryProvider.galleryList.data==null&&t.dataReady)},null,8,["galleryList","video","isLoading"]),o(j,{class:"mt-6 sm:hidden",favouriteClicked:t.favouriteClicked,isAllpaymentDisable:t.isAllPaymentDisable,loginUserId:t.loginUserId,itemId:t.itemId,selectedChatType:(s=(O=t.appInfoProvider.appInfo.data)==null?void 0:O.psAppSetting)==null?void 0:s.SelectedChatType,loadDataForItemDetail:t.loadDataForItemDetail,whatsAppNo:t.whatsAppNo},null,8,["favouriteClicked","isAllpaymentDisable","loginUserId","itemId","selectedChatType","loadDataForItemDetail","whatsAppNo"]),o(Y,{class:"mt-6 sm:hidden",loginUserId:t.loginUserId,productStore:t.productStore},null,8,["loginUserId","productStore"]),o(Q,{productRelation:t.productRelation,isSoldOutFeatureSettingOn:($=t.appInfoProvider)==null?void 0:$.isSoldOutFeatureSettingOn()},null,8,["productRelation","isSoldOutFeatureSettingOn"]),m("div",Ne,[((ft=t.appInfoProvider)==null?void 0:ft.isVendorSettingOn())&&((gt=(tt=t.productStore.item)==null?void 0:tt.data)==null?void 0:gt.vendor)&&((It=(vt=t.productStore.item)==null?void 0:vt.data)==null?void 0:It.vendor.id)!=""&&((yt=(B=t.productStore.item)==null?void 0:B.data)==null?void 0:yt.user)&&((Pt=(ht=(St=t.productStore.item)==null?void 0:St.data)==null?void 0:ht.user)==null?void 0:Pt.userId)!=t.loginUserId?(G(),Ct(Z,{key:0,vendor:(r=(a=t.productStore.item)==null?void 0:a.data)==null?void 0:r.vendor,itemId:t.itemId},null,8,["vendor","itemId"])):((S=(u=t.productStore.item)==null?void 0:u.data)==null?void 0:S.user)&&((b=(C=(h=t.productStore.item)==null?void 0:h.data)==null?void 0:C.user)==null?void 0:b.userId)!=t.loginUserId?(G(),Ct(J,{key:1,user:(A=(P=t.productStore.item)==null?void 0:P.data)==null?void 0:A.user,storeName:t.itemId},null,8,["user","storeName"])):At("",!0),o(X,{appInfoProvider:t.appInfoProvider,productStore:t.productStore},null,8,["appInfoProvider","productStore"])]),m("div",Fe,[o(v,{text:c.$t("item_detail__safety_tips"),clickLeranMore:t.safetyTip},{icon:H(()=>[m("div",null,[o(g,{textColor:"text-feAchromatic-900 dark:text-feAchromatic-100",class:"pt-1",w:"25",h:"24",name:"safetyTip"})])]),_:1},8,["text","clickLeranMore"]),o(v,{text:c.$t("term_and_condition__term_and_condition"),clickLeranMore:t.termsAndConditions},{icon:H(()=>[m("div",null,[o(g,{textColor:"text-feAchromatic-900 dark:text-feAchromatic-100",name:"termsAndCondition"})])]),_:1},8,["text","clickLeranMore"]),o(v,{text:c.$t("item_detail__faq"),clickLeranMore:t.faq},{icon:H(()=>[m("div",null,[o(g,{textColor:"text-feAchromatic-900 dark:text-feAchromatic-100",name:"faq"})])]),_:1},8,["text","clickLeranMore"])])]),m("div",Me,[o(j,{favouriteClicked:t.favouriteClicked,loginUserId:t.loginUserId,isAllpaymentDisable:t.isAllPaymentDisable,itemId:t.itemId,selectedChatType:(L=(x=t.appInfoProvider.appInfo.data)==null?void 0:x.psAppSetting)==null?void 0:L.SelectedChatType,loadDataForItemDetail:t.loadDataForItemDetail,whatsAppNo:t.whatsAppNo,isVendorExpired:t.isVendorExpired},null,8,["favouriteClicked","loginUserId","isAllpaymentDisable","itemId","selectedChatType","loadDataForItemDetail","whatsAppNo","isVendorExpired"]),((w=t.appInfoProvider)==null?void 0:w.isVendorSettingOn())&&((k=(D=t.productStore.item)==null?void 0:D.data)==null?void 0:k.vendor)&&((T=(U=t.productStore.item)==null?void 0:U.data)==null?void 0:T.vendor.id)!=""&&((F=(N=t.productStore.item)==null?void 0:N.data)==null?void 0:F.user)&&((R=(I=(i=t.productStore.item)==null?void 0:i.data)==null?void 0:I.user)==null?void 0:R.userId)!=t.loginUserId?(G(),Ct(Z,{key:0,vendor:(ot=(et=t.productStore.item)==null?void 0:et.data)==null?void 0:ot.vendor,itemId:t.itemId},null,8,["vendor","itemId"])):((rt=(at=t.productStore.item)==null?void 0:at.data)==null?void 0:rt.user)&&((dt=(lt=(it=t.productStore.item)==null?void 0:it.data)==null?void 0:lt.user)==null?void 0:dt.userId)!=t.loginUserId?(G(),Ct(J,{key:1,user:(mt=(nt=t.productStore.item)==null?void 0:nt.data)==null?void 0:mt.user,storeName:t.itemId},null,8,["user","storeName"])):At("",!0),o(Y,{loginUserId:t.loginUserId,productStore:t.productStore},null,8,["loginUserId","productStore"]),o(X,{appInfoProvider:t.appInfoProvider,productStore:t.productStore,mapContainer:"mapContainer2"},null,8,["appInfoProvider","productStore"]),m("div",Ee,[o(v,{text:c.$t("item_detail__safety_tips"),clickLeranMore:t.safetyTip},{icon:H(()=>[m("div",null,[o(g,{textColor:"text-feAchromatic-900 dark:text-feAchromatic-100",class:"pt-1",w:"25",h:"24",name:"safetyTip"})])]),_:1},8,["text","clickLeranMore"]),o(v,{text:c.$t("term_and_condition__term_and_condition"),clickLeranMore:t.termsAndConditions},{icon:H(()=>[m("div",null,[o(g,{textColor:"text-feAchromatic-900 dark:text-feAchromatic-100",name:"termsAndCondition"})])]),_:1},8,["text","clickLeranMore"]),o(v,{text:c.$t("item_detail__faq"),clickLeranMore:t.faq},{icon:H(()=>[m("div",null,[o(g,{textColor:"text-feAchromatic-900 dark:text-feAchromatic-100",name:"faq"})])]),_:1},8,["text","clickLeranMore"])])])]),o(ct)])]}),_:1}),o(ut,{ref:"ps_loading_dialog"},null,512),o(d,{ref:"gallery_detail"},null,512),o(M,{ref:"ps_learn_more_dialog"},null,512)],64)}var za=be(Ae,[["render",Ve]]);export{za as default};
