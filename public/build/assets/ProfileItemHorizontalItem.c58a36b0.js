import Y from"./PsLabel.dd7b9156.js";import Z from"./PsCard.c6bb6e2a.js";import $ from"./PsIcon.c404b5b9.js";import{P as H}from"./ps_constants.ea9d0b33.js";import ee from"./PsAdSense.e3562fb6.js";import te from"./PsLoadingDialog.52bc8b7d.js";import{f as oe}from"./format.min.1a01be2e.js";import ie from"./PsRouteLink.ab373f40.js";import{h as re}from"./moment.9709ab41.js";import{i as G,o as i,c as m,a as _,f as w,w as r,n as Q,b as s,m as q,g as x,q as d,t as a,F as ae,z as W,O as se,r as A,C as le}from"./app.72d9fe45.js";import{P as X}from"./PsValueStore.46e374fe.js";import{P as ne}from"./Product.0519ee40.js";import{u as me}from"./PsValueHolder.64e68efd.js";import{u as de}from"./AppInfoStore.3eac0301.js";import{u as ce}from"./ProductStore.017d2a02.js";import{u as fe}from"./FavouriteItemStore.e64977ef.js";import{u as ue,F as _e}from"./FollowItemParameterHolder.54ad8b57.js";import{A as xe}from"./AppInfoParameterHolder.e24d894d.js";import{_ as ge}from"./plugin-vue_export-helper.21dcd24c.js";import"./PsApiService.74841eb2.js";import"./PsObject.a17ef38f.js";import"./DefaultPhoto.cc755f93.js";import"./PsModal.49a87bcd.js";import"./vue-neat-modal.d239f4e3.js";import"./PsLine.c7f2ab42.js";import"./PsLabelTitle.8e337e9e.js";import"./Category.7c65464b.js";import"./DefaultIcon.e76b39a5.js";import"./SubCategory.1b4176e0.js";import"./ItemCurrency.91c8ce91.js";import"./ItemLocationTownship.94979fe0.js";import"./ProductRelation.0b376978.js";import"./User.0c3ba1a8.js";import"./RatingDetail.291ad5d1.js";import"./Vendor.d946ee87.js";import"./ProductParameterHolder.b9a2d040.js";import"./Phone.45f97258.js";import"./ApiStatus.5720ba0b.js";import"./UserDeleteItemParameterHolder.5d816aba.js";import"./PsSepetetedStore.9a31ac47.js";import"./PsUtils.eb7a8002.js";const pe={name:"ItemHorizontalItem",components:{PsLabel:Y,PsCard:Z,PsIcon:$,PsAdSense:ee,PsRouteLink:ie,PsLoadingDialog:te},props:{item:{type:ne},notShowTitle:{type:Boolean,default:!1},onClick:Function,storeName:{type:String,default:""}},setup(o){var z,I,O;const b=G();X.psValueStore=me();const e=ce(o.storeName),t=fe(),J=ue(),M=X(),c=M.getLoginUserId(),N=new xe,l=new _e;N.userId=c;const n=de(),V=G(!1),B=G(o.item.user.userId==c);((O=(I=(z=n==null?void 0:n.appInfo)==null?void 0:z.data)==null?void 0:I.mobileSetting)==null?void 0:O.is_show_owner_info)=="1"&&(V.value=!0);function F(S){var L,R,j,D,T,g,p,v,h,y,P,f,u;if(S.toString()=="0"&&((R=(L=n.appInfo.data)==null?void 0:L.psAppSetting)==null?void 0:R.SelectedPriceType)==H.NORMAL_PRICE)return W("item_price__free");if(((D=(j=n.appInfo.data)==null?void 0:j.psAppSetting)==null?void 0:D.SelectedPriceType)==H.PRICE_RANGE){const k=parseFloat(S),C=parseInt(k);return C>5?"$".repeat(5):C<1?"$".repeat(1):"$".repeat(C)}else{if(((p=(g=(T=n==null?void 0:n.appInfo)==null?void 0:T.data)==null?void 0:g.mobileSetting)==null?void 0:p.price_format)==="###,###")return new Intl.NumberFormat("en-FR",{style:"decimal",useGrouping:!0,minimumFractionDigits:0}).format(S).replace(","," ");if(((y=(h=(v=n==null?void 0:n.appInfo)==null?void 0:v.data)==null?void 0:h.mobileSetting)==null?void 0:y.price_format)==="##,####"){let C=parseFloat(S).toFixed(4).split("."),K=C.pop();return K=C[0],K.replace(/(\d)(?=(\d{4})+$)/g,"$1,")}else return oe((u=(f=(P=n==null?void 0:n.appInfo)==null?void 0:P.data)==null?void 0:f.mobileSetting)==null?void 0:u.price_format,S)}}async function E(S){c&&c!=H.NO_LOGIN_USER?(b.value.openModal(),o.item.isFavourited=="1"?b.value.message=W("item_detail__removing_item_from_favourite"):b.value.message=W("item_detail__adding_item_to_favourite"),await t.postFavourite(S,c),await U(),b.value.closeModal()):se.get(route("login"))}async function U(){o.storeName==""?await J.refleshFollowerItemList(c,l):o.storeName=="favourite"?await t.resetFavouriteItemList(c):(await e.refleshProductList(c,e.paramHolder),await t.resetFavouriteItemList(c))}return{appInfoStore:n,formatPrice:F,PsConst:H,psValueStore:M,favouriteClicked:E,ps_loading_dialog:b,showProfile:V,moment:re,isOwner:B}}},he={class:"h-44 relative z-0"},ye={class:"overflow-hidden h-44 w-full"},be={alt:"Placeholder",class:"overflow-hidden transform transition duration-500 hover:scale-110 rounded-t-lg object-cover w-screen h-44",width:"640px",height:"360px"},Se={key:1,class:"absolute bg-feWarning-500 rounded px-2 py-1 flex justify-center items-center left-2 top-2 z-20"},ve={key:2},Pe={key:0,class:"absolute bg-fePrimary-500 rounded px-2 py-1 flex justify-center items-center left-2 top-2 z-20"},we={key:0,class:"absolute bg-feSuccess-500 rounded px-2 py-1 left-0 top-8"},Ie={key:1,class:"absolute bg-feSuccess-500 rounded px-2 py-1 flex justify-center items-center left-2 top-2 z-20"},ke={key:3,class:"absolute bg-feSecondary-300 rounded px-2 py-1 flex justify-center items-center left-2 top-2 z-20"},Ce={key:4,class:"absolute bg-feError-500 rounded px-2 py-1 flex justify-center items-center left-2 top-2 z-20"},Ae={class:"absolute left-2 bottom-2 z-20"},Ne={key:1},Fe={key:0,class:"ps-1 flex flex-row items-center justify-start"},ze={key:0,class:"pt-1 pb-2 flex items-center justify-between leading-none px-2 rounded-b-xl lg:rounded-b-2xl"},Oe={class:"flex flex-row relative items-center no-underline text-feAchromatic-900"},Le={alt:"Placeholder",class:"rounded-full bg-transparent lg:w-8 lg:h-8 w-6 h-6 flex items-center justify-center object-cover",width:"50px",height:"50px"},Re={class:"ms-2 mt-1 text-sm flex-grow"},je={class:"flex flex-row w-full"},De={key:0,class:"pt-1 pb-2 flex flex-row items-center no-underline justify-between text-feAchromatic-900 leading-none px-2 rounded-b-xl lg:rounded-b-2xl"},Te={class:"relative"},Ve={alt:"Placeholder",class:"rounded-full bg-transparent lg:w-8 lg:h-8 w-6 h-6 flex items-center justify-center object-cover",width:"50px",height:"50px"},Ee={key:0,class:"w-3 h-3 bg-feInfo-500 rounded-full flex justify-center items-center absolute bottom-0 right-0"},Ue={class:"flex truncate text-xs text-feSecondary-800 dark_text-feSecondary-300"},He={class:"font-light text-xs text-feSecondary-500 dark_text-feSecondary-500"};function Me(o,b,e,t,J,M){var E,U,z;const c=A("ps-route-link"),N=A("ps-icon"),l=A("ps-label"),n=A("ps-card"),V=A("ps-ad-sense"),B=A("ps-loading-dialog"),F=le("lazy");return i(),m(ae,null,[_("div",{class:"cursor-pointer w-full h-auto",onClick:b[1]||(b[1]=I=>e.onClick!=null?e.onClick(e.item):null)},[((E=e.item)==null?void 0:E.adType)==t.PsConst.NORMAL_AD||((U=e.item)==null?void 0:U.adType)==t.PsConst.PAID_AD?(i(),w(n,{key:0,class:"flex w-full bg-feAchromatic-50 flex-col lg:rounded-lg shadow-sm",enabledHover:!0},{default:r(()=>{var I,O,S,L,R,j,D,T;return[_("div",{class:Q(["lg:px-0 lg:py-0 px-1 py-1",t.showProfile?"rounded-b-xl lg:rounded-b-2xl ":"rounded-xl lg:rounded-2xl"])},[_("div",he,[s(c,{class:"absolute z-10",to:{name:"fe_item_detail",query:{item_id:e.item.id}}},{default:r(()=>[_("div",ye,[q(_("img",be,null,512),[[F,{src:o.$page.props.thumb2xUrl+"/"+e.item.defaultPhoto.imgPath,loading:o.$page.props.sysImageUrl+"/loading_gif.gif",error:o.$page.props.sysImageUrl+"/default_photo.png"}]])])]),_:1},8,["to"]),t.isOwner?x("",!0):(i(),m("div",{key:0,class:"absolute z-20 bg-feAchromatic-50 dark:bg-feSecondary-800 rounded w-10 h-10 flex justify-center items-center right-2 top-2",onClick:b[0]||(b[0]=g=>t.favouriteClicked(e.item.id))},[s(N,{textColor:"text-fePrimary-500 dark:text-feAchromatic-50",name:e.item.isFavourited=="1"?"heart":"heart-outline",h:"24",w:"24"},null,8,["name"])])),e.item.status=="0"?(i(),m("div",Se,[s(l,{class:"text-xs lg:text-sm text-center font-medium",textColor:"text-feAchromatic-50 "},{default:r(()=>[d(a(o.$t("core_fe__pending")),1)]),_:1})])):e.item.status=="1"?(i(),m("div",ve,[e.item.isDiscount=="1"?(i(),m("div",Pe,[s(l,{class:"text-xs lg:text-sm text-center font-medium",textColor:"text-feAchromatic-50 "},{default:r(()=>[d(a(e.item.percent)+a(o.$t("item_horizontal_item__discount")),1)]),_:1}),e.item.isPaid=="1"?(i(),m("div",we,[s(l,{class:"text-xs lg:text-sm font-medium text-center",textColor:"text-feAchromatic-50 "},{default:r(()=>[d(a(o.$t("item_horizontal_item__featured")),1)]),_:1})])):x("",!0)])):e.item.isPaid=="1"?(i(),m("div",Ie,[s(l,{class:"text-xs lg:text-sm text-center font-medium",textColor:"text-feAchromatic-50 "},{default:r(()=>[d(a(o.$t("item_horizontal_item__featured")),1)]),_:1})])):x("",!0)])):e.item.status=="2"?(i(),m("div",ke,[s(l,{class:"text-xs lg:text-sm text-center font-medium",textColor:"text-feSecondary-500 "},{default:r(()=>[d(a(o.$t("core_fe__disabled")),1)]),_:1})])):e.item.status=="3"?(i(),m("div",Ce,[s(l,{class:"text-xs lg:text-sm text-center font-medium",textColor:"text-feAchromatic-50 "},{default:r(()=>[d(a(o.$t("core_fe__rejected")),1)]),_:1})])):x("",!0),_("div",Ae,[e.item&&e.item.isSoldOut=="1"&&((I=t.appInfoStore)==null?void 0:I.isSoldOutFeatureSettingOn())?(i(),w(l,{key:0,class:"py-1 px-2 text-sm rounded bg-fePrimary-500 font-medium",textColor:"text-feAchromatic-50 "},{default:r(()=>[d(a(o.$t("item_horizontal_item__sold_out")),1)]),_:1})):x("",!0)])]),s(c,{to:{name:"fe_item_detail",query:{item_id:e.item.id}}},{default:r(()=>{var g,p,v,h,y,P;return[e.notShowTitle?x("",!0):(i(),w(l,{key:0,class:"ps-1 pt-1 font-normal text-sm",textColor:"text-feSecondary-600 dark:text-feSecondary-200"},{default:r(()=>[d(a(e.item?e.item.title:""),1)]),_:1})),((p=(g=t.appInfoStore.appInfo.data)==null?void 0:g.psAppSetting)==null?void 0:p.SelectedPriceType)!=t.PsConst.NO_PRICE?(i(),m("div",Ne,[e.item.isDiscount=="1"&&((h=(v=t.appInfoStore.appInfo.data)==null?void 0:v.mobileSetting)==null?void 0:h.is_show_discount)=="1"?(i(),m("div",Fe,[((P=(y=t.appInfoStore.appInfo.data)==null?void 0:y.psAppSetting)==null?void 0:P.SelectedPriceType)==t.PsConst.NORMAL_PRICE?(i(),w(l,{key:0,class:"line-through me-2 font-semibold text-xs",textColor:"text-feSecondary-500 "},{default:r(()=>{var f,u;return[d(a(e.item&&((u=(f=t.appInfoStore.appInfo.data)==null?void 0:f.psAppSetting)==null?void 0:u.SelectedPriceType)==t.PsConst.NORMAL_PRICE?e.item.itemCurrency.currencySymbol:"")+" "+a(t.formatPrice(e.item?e.item.originalPrice:"")),1)]}),_:1})):x("",!0),s(l,{class:"font-semibold text-xs lg:text-base",textColor:"text-fePrimary-500 "},{default:r(()=>{var f,u;return[d(a(e.item&&((u=(f=t.appInfoStore.appInfo.data)==null?void 0:f.psAppSetting)==null?void 0:u.SelectedPriceType)==t.PsConst.NORMAL_PRICE?e.item.itemCurrency.currencySymbol:"")+" "+a(t.formatPrice(e.item?e.item.price:"")),1)]}),_:1})])):(i(),w(l,{key:1,class:"ps-1 font-semibold text-base",textColor:"text-fePrimary-500 "},{default:r(()=>{var f,u;return[d(a(e.item&&((u=(f=t.appInfoStore.appInfo.data)==null?void 0:f.psAppSetting)==null?void 0:u.SelectedPriceType)==t.PsConst.NORMAL_PRICE?e.item.itemCurrency.currencySymbol:"")+" "+a(t.formatPrice(e.item?e.item.originalPrice:"")),1)]}),_:1}))])):x("",!0),e.notShowTitle?x("",!0):(i(),m("div",{key:2,class:Q([t.showProfile?"pb-0":"pb-2","ps-1 flex items-center rtl:space-x-reverse space-x-2.5"])},[s(N,{textColor:"text-feSecondary-400 dark:text-feAchromatic-500",name:"location-marker",h:"14",w:"14",class:"text-feSecondary-400 me-1",viewBox:"0 0 14 14"}),s(l,{class:"truncate font-normal text-sm",textColor:"text-feSecondary-400 dark:text-feSecondary-200"},{default:r(()=>[d(a(e.item?e.item.itemLocation.name:""),1)]),_:1})],2))]}),_:1},8,["to"])],2),((O=t.appInfoStore)==null?void 0:O.isVendorSettingOn())&&((L=(S=e.item)==null?void 0:S.vendor)==null?void 0:L.id)!=""?(i(),w(c,{key:0,to:{name:"fe_vendor_info",params:{vendorId:(j=(R=e.item)==null?void 0:R.vendor)==null?void 0:j.id}}},{default:r(()=>{var g,p,v;return[t.showProfile?(i(),m("div",ze,[_("div",Oe,[q(_("img",Le,null,512),[[F,{src:o.$page.props.thumb1xUrl+"/"+((v=(p=(g=e.item)==null?void 0:g.vendor)==null?void 0:p.logo)==null?void 0:v.imgPath),loading:o.$page.props.sysImageUrl+"/loading_gif.gif",error:o.$page.props.sysImageUrl+"/default_vendor_shop.png"}]])]),_("p",Re,[_("div",je,[s(l,{class:"text-xs",textColor:"text-feSecondary-800 dark:text-feSecondary-300"},{default:r(()=>{var h,y,P,f,u,k;return[d(a(((y=(h=e.item)==null?void 0:h.vendor)==null?void 0:y.name.length)>24?((f=(P=e.item)==null?void 0:P.vendor)==null?void 0:f.name.slice(0,24))+" ...":(k=(u=e.item)==null?void 0:u.vendor)==null?void 0:k.name),1)]}),_:1}),s(l,{class:"p-1 ms-2 text-xxs rounded-sm bg-feWarning-500",textColor:"text-feAchromatic-50"},{default:r(()=>[d(a(o.$t("core_fe__vendor_indicator")),1)]),_:1})]),s(l,{class:"font-light text-xs",textColor:"text-feSecondary-500 dark:text-feSecondary-500"},{default:r(()=>{var h,y;return[d(a((h=e.item)!=null&&h.vendor?t.moment((y=e.item)==null?void 0:y.vendor.addedDate).format(o.$page.props.dateFormat):""),1)]}),_:1})])])):x("",!0)]}),_:1},8,["to"])):(i(),w(c,{key:1,to:{name:"fe_other_profile",params:{userId:(T=(D=e.item)==null?void 0:D.user)==null?void 0:T.userId}}},{default:r(()=>{var g,p;return[t.showProfile?(i(),m("div",De,[_("div",Te,[q(_("img",Ve,null,512),[[F,{src:o.$page.props.thumb1xUrl+"/"+((p=(g=e.item)==null?void 0:g.user)==null?void 0:p.userCoverPhoto),loading:o.$page.props.sysImageUrl+"/loading_gif.gif",error:o.$page.props.sysImageUrl+"/default_photo.png"}]]),e.item.user.isVerifybluemark=="1"?(i(),m("div",Ee,[s(N,{name:"bluemark",textColor:"text-feSecondary-50",w:"8",h:"8"})])):x("",!0)]),s(l,{class:"ms-2 mt-1 text-sm flex-grow"},{default:r(()=>[_("span",Ue,a(e.item.user.userName.length>12?e.item.user.userName.slice(0,12)+" ...":e.item.user.userName),1),_("span",He,a(e.item?t.moment(e.item.addedDate).format(o.$page.props.dateFormat):""),1)]),_:1})])):x("",!0)]}),_:1},8,["to"]))]}),_:1})):x("",!0),((z=e.item)==null?void 0:z.adType)==t.PsConst.GOOGLE_AD?(i(),w(n,{key:1,class:"flex flex-col w-full lg:h-72 h-52 mx-auto lg:mt-12 lg:mb-12 mt-8 mb-6"},{default:r(()=>[s(V,{adFormat:"square",adStyle:"display:inline-block; width: 160px; height: 160px;",adStyleSm:"display:inline-block; width: 160px; height: 160px;",adStyleLg:"display:inline-block; width: 160px; height: 160px;"})]),_:1})):x("",!0)]),s(B,{ref:"ps_loading_dialog"},null,512)],64)}var Ft=ge(pe,[["render",Me]]);export{Ft as default};
