import{d as x,Z as N,i as f,z as r,E as M,o as _,c as B,b as a,w as l,a as i,q as d,t as m,h as q,f as v,g as P,m as z,F as A,r as n,C as O}from"./app.72d9fe45.js";import{P as R}from"./PsLayout.847d3bb7.js";import{P as W}from"./PsBreadcrumb2.c233a04a.js";import{u as Z}from"./Validators.f69d3a03.js";import{P as G}from"./PsInput.afea411a.js";import{P as J}from"./PsLabel.9b145d71.js";import{P as K}from"./PsButton.75e226c0.js";import{a as Q,d as X}from"./PsDangerDialog.4a7cc4cb.js";import{P as Y}from"./PsCard.bbe9c0c8.js";import{P as ee}from"./PsIcon.8d64a589.js";import{P as oe}from"./PsInputWithRightIcon.e27f7629.js";import{P as ae}from"./PsLoading.1f14f5af.js";import{P as te}from"./PsCheckboxValue.4ec39ca8.js";import{a as re,P as le}from"./PsActionModal.f08d8887.js";import{P as se}from"./PsImageUpload.61e8f8c2.js";import{P as ne}from"./PsLabelCaption.0e118b2b.js";import{P as ie}from"./PsLabelTitle3.dae97f2a.js";import de from"./LanguageUpdateModal.2d8f7faa.js";import{_ as me}from"./plugin-vue_export-helper.21dcd24c.js";import"./PsDropdown.dd6513b3.js";import"./PsDropdownSelect.2cfdee10.js";import"./PsToggle.8b891384.js";import"./toggle.11911129.js";import"./PsWarningDialog.632500d7.js";import"./PsModal.9ecdc9db.js";import"./vue-neat-modal.d239f4e3.js";import"./index.esm.159b9749.js";import"./auth.esm.925cebae.js";import"./SidebarMenuItem.9469c8c6.js";import"./SidebarSubTab.7743e9bd.js";import"./PsErrorDialog.5174f1d4.js";import"./PsSuccessDialog.4b6e8f79.js";import"./PsBannerIcon.ba5a991b.js";import"./PsIcon1.56bc2bff.js";import"./Icons.c01eddd9.js";import"./PsLoadingCircleDialog.70b57269.js";import"./PsLabelHeader4.cfe9ad61.js";import"./PsDraggable.2c92160e.js";const ce=x({name:"Edit",components:{Head:N,PsBreadcrumb2:W,PsImageUpload:se,PsInput:G,PsLabel:J,PsButton:K,PsLabelHeader6:Q,PsCard:Y,PsIcon:ee,PsLoading:ae,PsCheckboxValue:te,PsActionModal:re,PsImageIconModal:le,PsDangerDialog:X,PsLabelCaption:ne,PsInputWithRightIcon:oe,LanguageUpdateModal:de,PsLabelTitle3:ie},layout:R,props:["errors","category","validation","languages","categoryLanguages"],setup(e){const o=f(!1),y=f(!1),C=f(),I=f(),S=f(),U=f(),g=f(),w=f(r(e.category.name));setTimeout(()=>{w.value=r(e.category.name)},3e3);const{isEmpty:b,minLength:k}=Z(),L=(t,s)=>{e.errors[t]=s?k(t,s,3):b(t,s),t=="name"&&(U.value.isError=e.errors.name!="")};let p=M({name:e.category.name,status:e.category.status==1,nameForm:[],_method:"put"});function D(t){p.status==!0?p.status=1:p.status=0,p.nameForm=g.value.form,this.$inertia.post(route("category.update",t),p,{forceFormData:!0,onBefore:()=>{o.value=!0},onSuccess:()=>{o.value=!1,y.value=!0,this.$inertia.get(route("category.index"))},onError:()=>{U.value.isError=e.errors.name!="",o.value=!1}})}function $(t){let s=e.validation.includes("cover");C.value.openModal(r("core__be_replace_cat_photo"),r("core__be_replace_img_label"),r("core__be_remove_img_label"),"imagePlus","cross","24","24",()=>{I.value.openModal(r("core__be_upload_photo"),"cloudUpload",u=>{let h=M({image:u,_method:"put"});this.$inertia.post(route("image.replace",t),h)})},()=>{S.value.openModal(r("core__be_remove_label"),r("core__be_are_u_sure_remove_photo"),r("core__be_btn_confirm"),r("core__be_btn_cancel"),()=>{this.$inertia.delete(route("image.destroy",t),{onBefore:()=>{o.value=!0},onSuccess:()=>{o.value=!1,y.value=!0,setTimeout(()=>{y.value=!1},2e3)},onError:()=>{o.value=!1}})},()=>{})},!s)}function F(t){let s=e.validation.includes("icon");C.value.openModal(r("core__be_replace_cat_icon"),r("core__be_replace_icon_label"),r("core__be_remove_icon_label"),"image","trash","24","24",()=>{I.value.openModal(r("core__be_upload_icon"),"cloudUpload",u=>{let h=M({image:u,_method:"put"});this.$inertia.post(route("image.replace",t),h)})},()=>{S.value.openModal(r("core__be_remove_label"),r("core__be_are_u_sure_remove_icon"),r("core__be_btn_confirm"),r("core__be_btn_cancel"),()=>{this.$inertia.delete(route("image.destroy",t),{onBefore:()=>{o.value=!0},onSuccess:()=>{o.value=!1,y.value=!0,setTimeout(()=>{y.value=!1},2e3)},onError:()=>{o.value=!1}})},()=>{})},!s)}function E(){g.value.languageStrings.data.length==0&&e.languages.forEach(t=>{var u;let s={};s.language=t,s.key="_name",s.value=(u=e.categoryLanguages.filter(h=>h.language_id==t.id)[0])==null?void 0:u.value,s.language_id=t.id,g.value.languageStrings.data.push(s)}),g.value.form.key==""&&(g.value.form.key="_name"),g.value.openModal("_name",t=>{const s=localStorage.activeLanguage?localStorage.activeLanguage:"en";t.values.forEach(u=>{u.symbol==s&&(w.value=u.value)})},!0)}return{replaceIconClicked:F,validateNameInput:L,handleSubmit:D,ps_action_modal:C,form:p,loading:o,success:y,replaceImageClicked:$,ps_danger_dialog:S,ps_image_icon_modal:I,language_update_modal_name:g,categoryClick:E,nameString:w}},computed:{breadcrumb(){return[{label:r("core__be_dashboard_label"),url:route("admin.index")},{label:r("category_module"),url:route("category.index")},{label:r("core__edit_category"),color:"text-primary-500"}]}},methods:{handleCancel(){this.$inertia.get(route("category.index"))}}}),ue={class:"rounded-xl"},_e={class:"bg-primary-50 dark:bg-primary-900 py-2.5 ps-4 rounded-t-xl"},pe={class:"px-4 pt-6 dark:bg-backgroundDark"},ge={class:"grid w-full sm:w-1/2 gap-6"},be=i("span",{class:"text-red-800 font-medium ms-1"},"*",-1),fe=i("span",{class:"text-red-800 font-medium ms-1"},"*",-1),ve={key:1,class:"flex items-end pt-4"},ye={class:"w-96 h-48",alt:"category cover"},he=i("span",{class:"text-red-800 font-medium ms-1"},"*",-1),ke={key:1,class:"flex items-end pt-4"},$e={class:"w-48 h-48",alt:"category icon"},Pe={class:"mb-2.5 flex flex-row justify-end"};function we(e,o,y,C,I,S){const U=n("Head"),g=n("ps-breadcrumb-2"),w=n("ps-label-header-6"),b=n("ps-label"),k=n("ps-icon"),L=n("ps-input-with-right-icon"),p=n("ps-label-caption"),D=n("ps-label-title-3"),$=n("ps-button"),F=n("ps-image-icon-modal"),E=n("ps-action-modal"),t=n("ps-danger-dialog"),s=n("ps-image-upload"),u=n("ps-checkbox-value"),h=n("ps-loading"),H=n("language-update-modal"),V=n("ps-card"),j=n("ps-layout"),T=O("lazy");return _(),B(A,null,[a(U,{title:e.$t("core__edit_category")},null,8,["title"]),a(j,null,{default:l(()=>[a(g,{items:e.breadcrumb,class:"mb-5 sm:mb-6 lg:mb-8"},null,8,["items"]),a(V,{class:"w-full h-auto"},{default:l(()=>[i("div",ue,[i("div",_e,[a(w,{textColor:"text-secondary-800 dark:text-secondary-100"},{default:l(()=>[d(m(e.$t("core__be_category_info")),1)]),_:1})]),i("div",pe,[i("form",{onSubmit:o[8]||(o[8]=q(c=>e.handleSubmit(this.category.id),["prevent"]))},[i("div",ge,[i("div",null,[a(b,{class:"text-base mb-2"},{default:l(()=>[d(m(e.$t("core__category_label")),1),be]),_:1}),a(L,{theme:"text-secondary-500",rounded:"rounded",placeholder:e.$t("core__category_placeholder"),placeholderColor:"placeholder-secondary-500",ref:"name",disabled:!0,value:e.nameString,"onUpdate:value":o[1]||(o[1]=c=>e.nameString=c)},{icon:l(()=>[a(k,{name:"editPencil",w:"20",h:"20",onClick:o[0]||(o[0]=c=>e.categoryClick())})]),_:1},8,["placeholder","value"]),a(p,{textColor:"text-red-500 ",class:"mt-2 block"},{default:l(()=>[d(m(e.errors.name),1)]),_:1})]),i("div",null,[a(b,{class:"text-base mb-2"},{default:l(()=>[d(m(e.$t("core__category_photo_label")),1),fe]),_:1}),e.category.cover?P("",!0):(_(),v(D,{key:0},{default:l(()=>[d(m(e.$t("core__be_recommended_size_400_200")),1)]),_:1})),e.category.cover?(_(),B("div",ve,[z(i("img",ye,null,512),[[T,{src:e.$page.props.uploadUrl+"/"+e.category.cover.img_path,loading:e.$page.props.sysImageUrl+"/loading_gif.gif",error:e.$page.props.sysImageUrl+"/default_photo.png"}]]),a($,{type:"button",onClick:o[2]||(o[2]=c=>e.replaceImageClicked(e.category.cover.id)),rounded:"rounded-full",shadow:"drop-shadow-2xl",class:"-ms-10 mb-2",colors:"bg-white text-primary-500 dark:bg-secondaryDark-black",border:"border border-1 dark:border-secondary-700 border-secondary-300",padding:"p-1.5",hover:"",focus:""},{default:l(()=>[a(k,{name:"pencil-btn",w:"21",h:"21"})]),_:1}),a(F,{ref:"ps_image_icon_modal"},null,512),a(E,{ref:"ps_action_modal"},null,512),a(t,{ref:"ps_danger_dialog"},null,512)])):(_(),v(s,{key:2,uploadType:"image",imageFile:e.form.cover,"onUpdate:imageFile":o[3]||(o[3]=c=>e.form.cover=c)},null,8,["imageFile"])),a(p,{textColor:"text-red-500 ",class:"mt-2 block"},{default:l(()=>[d(m(e.errors.cover),1)]),_:1})]),i("div",null,[a(b,{class:"text-base mb-2"},{default:l(()=>[d(m(e.$t("core__category_icon_label")),1),he]),_:1}),e.category.icon?P("",!0):(_(),v(D,{key:0},{default:l(()=>[d(m(e.$t("core__be_recommended_size_200_200")),1)]),_:1})),e.category.icon?(_(),B("div",ke,[z(i("img",$e,null,512),[[T,{src:e.$page.props.uploadUrl+"/"+e.category.icon.img_path,loading:e.$page.props.sysImageUrl+"/loading_gif.gif",error:e.$page.props.sysImageUrl+"/default_photo.png"}]]),a($,{type:"button",onClick:o[4]||(o[4]=c=>e.replaceIconClicked(e.category.icon.id)),rounded:"rounded-full",shadow:"drop-shadow-2xl",class:"-ms-10 mb-2",colors:"bg-white text-primary-500 dark:bg-secondaryDark-black",border:"border border-1 dark:border-secondary-700 border-secondary-300",padding:"p-1.5",hover:"",focus:""},{default:l(()=>[a(k,{name:"pencil-btn",w:"21",h:"21"})]),_:1}),a(F,{ref:"ps_image_icon_modal",ser:""},null,512),a(E,{ref:"ps_action_modal"},null,512),a(t,{ref:"ps_danger_dialog"},null,512)])):(_(),v(s,{key:2,uploadType:"icon",imageFile:e.form.icon,"onUpdate:imageFile":o[5]||(o[5]=c=>e.form.icon=c)},null,8,["imageFile"])),a(p,{textColor:"text-red-500 ",class:"m-2"},{default:l(()=>[d(m(e.errors.icon),1)]),_:1})]),i("div",null,[a(b,{class:"text-base mb-2"},{default:l(()=>[d(m(e.$t("core__status_label")),1)]),_:1}),a(u,{value:e.form.status,"onUpdate:value":o[6]||(o[6]=c=>e.form.status=c),class:"font-normal",title:e.$t("core__publish_label")},null,8,["value","title"])]),i("div",Pe,[a($,{onClick:o[7]||(o[7]=c=>e.handleCancel()),type:"reset",class:"me-4",colors:"text-primary-500",hover:""},{default:l(()=>[d(m(e.$t("core__be_btn_cancel")),1)]),_:1}),a($,{class:"transition-all duration-300 min-w-3xs",padding:"px-7 py-2",rounded:"rounded",hover:"",focus:""},{default:l(()=>[e.loading?(_(),v(h,{key:0,theme:"border-2 border-t-2 border-text-8 border-t-primary-500",loadingSize:"h-5 w-5"})):P("",!0),e.success?(_(),v(k,{key:1,name:"check",w:"20",h:"20",class:"me-1.5 transition-all duration-300"})):P("",!0),e.success?(_(),v(b,{key:2,class:"transition-all duration-300",textColor:"text-white dark:text-secondaryDark-black"},{default:l(()=>[d(m(e.$t("core__be_btn_saved")),1)]),_:1})):P("",!0),!e.loading&&!e.success?(_(),v(b,{key:3,textColor:"text-white dark:text-secondaryDark-black"},{default:l(()=>[d(m(e.$t("core__be_btn_save")),1)]),_:1})):P("",!0)]),_:1})])])],32)])]),a(H,{ref:"language_update_modal_name"},null,512)]),_:1})]),_:1})],64)}var mo=me(ce,[["render",we]]);export{mo as default};
